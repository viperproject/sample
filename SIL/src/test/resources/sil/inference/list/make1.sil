var val: Int
var next: Ref

/** Returns a list with a single element with the given value. */
method make1(i: Int)
    returns (res: Ref)
{
    res := new()
    res.val := i
    res.next := null
}

method test() {
    var res: Ref

    res := make1(10)

    assert acc(res.next, write)
    assert acc(res.val, write)

    assert res.val == 10

    // We currently don't extract reference field assertions
    //:: UnexpectedOutput(assert.failed:assertion.false, /sample/issue/999/)
    assert res.next == null
}
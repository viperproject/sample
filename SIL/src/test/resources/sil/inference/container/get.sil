var val: Int

/** Returns the value stored in the given container. */
method get(c: Ref) returns (i: Int) {
    i := c.val
}

/** Tests that `get` returns the permission to the container value. */
method testGetPerm() {
    var i: Int
    var container: Ref
    container := new()
    container.val := 42

    i := get(container)

    assert(acc(container.val, write))
}

method testGetReturnValue() {
    var i: Int
    var container: Ref
    container := new()
    container.val := 42

    i := get(container)

    //:: UnexpectedOutput(assert.failed:assertion.false, /silicon/issue/999/)
    assert (i == 42)
}

method testGetOldValue() {
    var i: Int
    var container: Ref
    container := new()
    container.val := 42

    i := get(container)

    //:: UnexpectedOutput(assert.failed:assertion.false, /silicon/issue/999/)
    assert (container.val == 42)
}
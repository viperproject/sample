{"textVersion":"v2.2,js,ctx","jsonVersion":"v0.0,resolved","name":"meeting-o-meter","comment":"Count the number of hours spent in meetings since last month.","icon":"piechart","color":"#ff008080","autoIcon":"piechart","autoColor":"#008080","platform":"current","showAd":false,"isLibrary":false,"allowExport":false,"decls":[{"name":"main","inParameters":[],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Counts the number of hours in meetings since the last month...","nodeType":"comment","id":"60"},{"expr":{"tokens":[{"nodeType":"localRef","name":"start","localId":"20","id":"640"},{"op":":=","nodeType":"operator","id":"631"},{"nodeType":"singletonRef","name":"time","type":"Time","id":"64210"},{"name":"now","parent":"Time","nodeType":"propertyRef","id":"633"},{"name":"add months","parent":"DateTime","nodeType":"propertyRef","id":"634"},{"op":"(","nodeType":"operator","id":"635"},{"op":"-","nodeType":"operator","id":"636"},{"op":"1","nodeType":"operator","id":"637"},{"op":")","nodeType":"operator","id":"638"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"start","localId":"20","id":"640"},{"name":"add months","parent":"DateTime","nodeType":"call","args":[{"name":"now","parent":"Time","nodeType":"call","args":[{"nodeType":"singletonRef","name":"time","type":"Time","id":"64210"}],"id":"6420"},{"name":"-","parent":"Number","nodeType":"call","args":[{"nodeType":"numberLiteral","value":0,"id":"64220"},{"nodeType":"numberLiteral","value":1,"id":"64221"}],"id":"6421"}],"id":"641"}],"id":"63"},"locals":[{"name":"start","type":"DateTime","nodeType":"localDef","id":"20"}],"nodeType":"exprHolder","id":"62"},"nodeType":"exprStmt","id":"61"},{"expr":{"tokens":[{"nodeType":"localRef","name":"end","localId":"21","id":"670"},{"op":":=","nodeType":"operator","id":"661"},{"nodeType":"singletonRef","name":"time","type":"Time","id":"6720"},{"name":"today","parent":"Time","nodeType":"propertyRef","id":"663"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"end","localId":"21","id":"670"},{"name":"today","parent":"Time","nodeType":"call","args":[{"nodeType":"singletonRef","name":"time","type":"Time","id":"6720"}],"id":"671"}],"id":"66"},"locals":[{"name":"end","type":"DateTime","nodeType":"localDef","id":"21"}],"nodeType":"exprHolder","id":"65"},"nodeType":"exprStmt","id":"64"},{"expr":{"tokens":[{"op":"(","nodeType":"operator","id":"690"},{"nodeType":"stringLiteral","value":"Counting meeting hours from ","id":"6a10"},{"op":"∥","nodeType":"operator","id":"692"},{"nodeType":"localRef","name":"start","localId":"20","id":"6a11"},{"op":")","nodeType":"operator","id":"694"},{"name":"post to wall","parent":"String","nodeType":"propertyRef","id":"695"}],"tree":{"name":"post to wall","parent":"String","nodeType":"call","args":[{"name":"∥","parent":"String","nodeType":"call","args":[{"nodeType":"stringLiteral","value":"Counting meeting hours from ","id":"6a10"},{"nodeType":"localRef","name":"start","localId":"20","id":"6a11"}],"id":"6a0"}],"id":"69"},"locals":[],"nodeType":"exprHolder","id":"68"},"nodeType":"exprStmt","id":"67"},{"expr":{"tokens":[{"nodeType":"localRef","name":"aps","localId":"22","id":"6d0"},{"op":":=","nodeType":"operator","id":"6c1"},{"nodeType":"singletonRef","name":"social","type":"Social","id":"6d20"},{"name":"search appointments","parent":"Social","nodeType":"propertyRef","id":"6c3"},{"op":"(","nodeType":"operator","id":"6c4"},{"nodeType":"localRef","name":"start","localId":"20","id":"6d21"},{"op":",","nodeType":"operator","id":"6c6"},{"nodeType":"localRef","name":"end","localId":"21","id":"6d22"},{"op":")","nodeType":"operator","id":"6c8"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"aps","localId":"22","id":"6d0"},{"name":"search appointments","parent":"Social","nodeType":"call","args":[{"nodeType":"singletonRef","name":"social","type":"Social","id":"6d20"},{"nodeType":"localRef","name":"start","localId":"20","id":"6d21"},{"nodeType":"localRef","name":"end","localId":"21","id":"6d22"}],"id":"6d1"}],"id":"6c"},"locals":[{"name":"aps","type":"Appointment Collection","nodeType":"localDef","id":"22"}],"nodeType":"exprHolder","id":"6b"},"nodeType":"exprStmt","id":"6a"},{"expr":{"tokens":[{"nodeType":"localRef","name":"hours","localId":"23","id":"6g0"},{"op":":=","nodeType":"operator","id":"6f1"},{"op":"0","nodeType":"operator","id":"6f2"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"hours","localId":"23","id":"6g0"},{"nodeType":"numberLiteral","value":0,"id":"6g1"}],"id":"6f"},"locals":[{"name":"hours","type":"Number","nodeType":"localDef","id":"23"}],"nodeType":"exprHolder","id":"6e"},"nodeType":"exprStmt","id":"6d"},{"text":"Accumulating time, excluding all day and and private events.","nodeType":"comment","id":"6g"},{"iterator":{"name":"a","type":"Appointment","nodeType":"localDef","id":"24"},"collection":{"tokens":[{"nodeType":"localRef","name":"aps","localId":"22","id":"6j"}],"tree":{"nodeType":"localRef","name":"aps","localId":"22","id":"6j"},"locals":[],"nodeType":"exprHolder","id":"6i"},"conditions":[{"condition":{"tokens":[{"op":"not","nodeType":"operator","id":"6l20"},{"nodeType":"localRef","name":"a","localId":"24","id":"6l310"},{"name":"is private","parent":"Appointment","nodeType":"propertyRef","id":"6l22"}],"tree":{"name":"not","parent":"Boolean","nodeType":"call","args":[{"name":"is private","parent":"Appointment","nodeType":"call","args":[{"nodeType":"localRef","name":"a","localId":"24","id":"6l310"}],"id":"6l30"}],"id":"6l2"},"locals":[],"nodeType":"exprHolder","id":"6l1"},"nodeType":"where","id":"6l0"},{"condition":{"tokens":[{"op":"not","nodeType":"operator","id":"6l50"},{"nodeType":"localRef","name":"a","localId":"24","id":"6l610"},{"name":"is all day event","parent":"Appointment","nodeType":"propertyRef","id":"6l52"}],"tree":{"name":"not","parent":"Boolean","nodeType":"call","args":[{"name":"is all day event","parent":"Appointment","nodeType":"call","args":[{"nodeType":"localRef","name":"a","localId":"24","id":"6l610"}],"id":"6l60"}],"id":"6l5"},"locals":[],"nodeType":"exprHolder","id":"6l4"},"nodeType":"where","id":"6l3"},{"condition":{"tokens":[{"nodeType":"localRef","name":"a","localId":"24","id":"6l910"},{"name":"status","parent":"Appointment","nodeType":"propertyRef","id":"6l81"},{"name":"equals","parent":"String","nodeType":"propertyRef","id":"6l82"},{"op":"(","nodeType":"operator","id":"6l83"},{"nodeType":"stringLiteral","value":"busy","id":"6l91"},{"op":")","nodeType":"operator","id":"6l85"}],"tree":{"name":"equals","parent":"String","nodeType":"call","args":[{"name":"status","parent":"Appointment","nodeType":"call","args":[{"nodeType":"localRef","name":"a","localId":"24","id":"6l910"}],"id":"6l90"},{"nodeType":"stringLiteral","value":"busy","id":"6l91"}],"id":"6l8"},"locals":[],"nodeType":"exprHolder","id":"6l7"},"nodeType":"where","id":"6l6"}],"body":[{"expr":{"tokens":[{"nodeType":"localRef","name":"hours","localId":"23","id":"6m30"},{"op":":=","nodeType":"operator","id":"6m21"},{"nodeType":"localRef","name":"hours","localId":"23","id":"6m320"},{"op":"+","nodeType":"operator","id":"6m23"},{"nodeType":"localRef","name":"a","localId":"24","id":"6m322110"},{"name":"end time","parent":"Appointment","nodeType":"propertyRef","id":"6m25"},{"name":"subtract","parent":"DateTime","nodeType":"propertyRef","id":"6m26"},{"op":"(","nodeType":"operator","id":"6m27"},{"nodeType":"localRef","name":"a","localId":"24","id":"6m322120"},{"name":"start time","parent":"Appointment","nodeType":"propertyRef","id":"6m29"},{"op":")","nodeType":"operator","id":"6m2a"},{"op":"/","nodeType":"operator","id":"6m2b"},{"op":"3","nodeType":"operator","id":"6m2c"},{"op":"6","nodeType":"operator","id":"6m2d"},{"op":"0","nodeType":"operator","id":"6m2e"},{"op":"0","nodeType":"operator","id":"6m2f"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"hours","localId":"23","id":"6m30"},{"name":"+","parent":"Number","nodeType":"call","args":[{"nodeType":"localRef","name":"hours","localId":"23","id":"6m320"},{"name":"/","parent":"Number","nodeType":"call","args":[{"name":"subtract","parent":"DateTime","nodeType":"call","args":[{"name":"end time","parent":"Appointment","nodeType":"call","args":[{"nodeType":"localRef","name":"a","localId":"24","id":"6m322110"}],"id":"6m32210"},{"name":"start time","parent":"Appointment","nodeType":"call","args":[{"nodeType":"localRef","name":"a","localId":"24","id":"6m322120"}],"id":"6m32211"}],"id":"6m3220"},{"nodeType":"numberLiteral","value":3600,"id":"6m3221"}],"id":"6m321"}],"id":"6m31"}],"id":"6m2"},"locals":[],"nodeType":"exprHolder","id":"6m1"},"nodeType":"exprStmt","id":"6m0"}],"nodeType":"foreach","id":"6h"},{"text":"Create a big textbox...","nodeType":"comment","id":"6m"},{"expr":{"tokens":[{"nodeType":"localRef","name":"msg","localId":"25","id":"6q0"},{"op":":=","nodeType":"operator","id":"6p1"},{"nodeType":"stringLiteral","value":"Last month, you spent ","id":"6q210"},{"op":"∥","nodeType":"operator","id":"6p3"},{"nodeType":"singletonRef","name":"math","type":"Math","id":"6q2120"},{"name":"round","parent":"Math","nodeType":"propertyRef","id":"6p5"},{"op":"(","nodeType":"operator","id":"6p6"},{"nodeType":"localRef","name":"hours","localId":"23","id":"6q2121"},{"op":")","nodeType":"operator","id":"6p8"},{"op":"∥","nodeType":"operator","id":"6p9"},{"nodeType":"stringLiteral","value":" hours in meetings!","id":"6q21"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"msg","localId":"25","id":"6q0"},{"name":"∥","parent":"String","nodeType":"call","args":[{"name":"∥","parent":"String","nodeType":"call","args":[{"nodeType":"stringLiteral","value":"Last month, you spent ","id":"6q210"},{"name":"round","parent":"Math","nodeType":"call","args":[{"nodeType":"singletonRef","name":"math","type":"Math","id":"6q2120"},{"nodeType":"localRef","name":"hours","localId":"23","id":"6q2121"}],"id":"6q211"}],"id":"6q20"},{"nodeType":"stringLiteral","value":" hours in meetings!","id":"6q21"}],"id":"6q1"}],"id":"6p"},"locals":[{"name":"msg","type":"String","nodeType":"localDef","id":"25"}],"nodeType":"exprHolder","id":"6o"},"nodeType":"exprStmt","id":"6n"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6t10"},{"name":"create text box","parent":"Wall","nodeType":"propertyRef","id":"6s1"},{"op":"(","nodeType":"operator","id":"6s2"},{"nodeType":"localRef","name":"msg","localId":"25","id":"6t11"},{"op":",","nodeType":"operator","id":"6s4"},{"op":"3","nodeType":"operator","id":"6s5"},{"op":"6","nodeType":"operator","id":"6s6"},{"op":")","nodeType":"operator","id":"6s7"},{"name":"post to wall","parent":"TextBox","nodeType":"propertyRef","id":"6s8"}],"tree":{"name":"post to wall","parent":"TextBox","nodeType":"call","args":[{"name":"create text box","parent":"Wall","nodeType":"call","args":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6t10"},{"nodeType":"localRef","name":"msg","localId":"25","id":"6t11"},{"nodeType":"numberLiteral","value":36,"id":"6t12"}],"id":"6t0"}],"id":"6s"},"locals":[],"nodeType":"exprHolder","id":"6r"},"nodeType":"exprStmt","id":"6q"},{"condition":{"tokens":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6w0"},{"name":"ask boolean","parent":"Wall","nodeType":"propertyRef","id":"6v1"},{"op":"(","nodeType":"operator","id":"6v2"},{"nodeType":"stringLiteral","value":"Do you want to save your score in the leaderboards?","id":"6w1"},{"op":",","nodeType":"operator","id":"6v4"},{"nodeType":"stringLiteral","value":"Your number of meeting hours will be visible to others in the leaderboard.","id":"6w2"},{"op":")","nodeType":"operator","id":"6v6"}],"tree":{"name":"ask boolean","parent":"Wall","nodeType":"call","args":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6w0"},{"nodeType":"stringLiteral","value":"Do you want to save your score in the leaderboards?","id":"6w1"},{"nodeType":"stringLiteral","value":"Your number of meeting hours will be visible to others in the leaderboard.","id":"6w2"}],"id":"6v"},"locals":[],"nodeType":"exprHolder","id":"6u"},"thenBody":[{"expr":{"tokens":[{"nodeType":"singletonRef","name":"bazaar","type":"Bazaar","id":"6x30"},{"name":"post leaderboard score","parent":"Bazaar","nodeType":"propertyRef","id":"6x21"},{"op":"(","nodeType":"operator","id":"6x22"},{"nodeType":"localRef","name":"hours","localId":"23","id":"6x31"},{"op":")","nodeType":"operator","id":"6x24"}],"tree":{"name":"post leaderboard score","parent":"Bazaar","nodeType":"call","args":[{"nodeType":"singletonRef","name":"bazaar","type":"Bazaar","id":"6x30"},{"nodeType":"localRef","name":"hours","localId":"23","id":"6x31"}],"id":"6x2"},"locals":[],"nodeType":"exprHolder","id":"6x1"},"nodeType":"exprStmt","id":"6x0"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"bazaar","type":"Bazaar","id":"6x60"},{"name":"post leaderboard to wall","parent":"Bazaar","nodeType":"propertyRef","id":"6x51"}],"tree":{"name":"post leaderboard to wall","parent":"Bazaar","nodeType":"call","args":[{"nodeType":"singletonRef","name":"bazaar","type":"Bazaar","id":"6x60"}],"id":"6x5"},"locals":[],"nodeType":"exprHolder","id":"6x4"},"nodeType":"exprStmt","id":"6x3"}],"elseBody":[{"expr":{"tokens":[],"tree":{"nodeType":"singletonRef","name":"$skip","type":"Unknown","id":"6y2"},"locals":[],"nodeType":"exprHolder","id":"6y1"},"nodeType":"exprStmt","id":"6y0"}],"nodeType":"if","id":"6t"}],"id":"1"}],"nodeType":"app","id":"0"}

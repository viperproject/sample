{"textVersion":"v2.2,js,ctx","jsonVersion":"v0.0,resolved","name":"board game","comment":"A library to create classic board games. #docs #board #games","icon":"controller","color":"#ff9955bb","autoIcon":"controller","autoColor":"#9955bb","platform":"current","showAd":false,"isLibrary":true,"allowExport":false,"decls":[{"name":"example","inParameters":[],"outParameters":[],"isPrivate":true,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"This library provides basic operation to draw a classic game board and move pieces around.","nodeType":"comment","id":"60"},{"text":"### tile indexing","nodeType":"comment","id":"61"},{"text":"In the game board, a tile is identified by its row and column index, `(row, column)`. The tile at the top left is `(0,0)`, bottom right is `(rows, columns)`. Notice how we always refer to the row index, then the column index.","nodeType":"comment","id":"62"},{"text":"## initialization","nodeType":"comment","id":"63"},{"text":"You must call `initialize` or `initialize square` before using the library.","nodeType":"comment","id":"64"},{"expr":{"tokens":[{"nodeType":"localRef","name":"board","localId":"20","id":"680"},{"op":":=","nodeType":"operator","id":"671"},{"nodeType":"singletonRef","name":"media","type":"Media","id":"6820"},{"name":"create portrait board","parent":"Media","nodeType":"propertyRef","id":"673"},{"op":"(","nodeType":"operator","id":"674"},{"op":"4","nodeType":"operator","id":"675"},{"op":"8","nodeType":"operator","id":"676"},{"op":"0","nodeType":"operator","id":"677"},{"op":",","nodeType":"operator","id":"678"},{"op":"8","nodeType":"operator","id":"679"},{"op":"0","nodeType":"operator","id":"67a"},{"op":"0","nodeType":"operator","id":"67b"},{"op":")","nodeType":"operator","id":"67c"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"board","localId":"20","id":"680"},{"name":"create portrait board","parent":"Media","nodeType":"call","args":[{"nodeType":"singletonRef","name":"media","type":"Media","id":"6820"},{"nodeType":"numberLiteral","value":480,"id":"6821"},{"nodeType":"numberLiteral","value":800,"id":"6822"}],"id":"681"}],"id":"67"},"locals":[{"name":"board","type":"Board","nodeType":"localDef","id":"20"}],"nodeType":"exprHolder","id":"66"},"nodeType":"exprStmt","id":"65"},{"text":"`initialize square` creates a square board with even margins. It optimizes the size of the tile based on the size of the board, the margins (`12`) and the number of tile requested (`7`).","nodeType":"comment","id":"68"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6c0"},{"name":"initialize square","parent":"code","declId":"K","nodeType":"propertyRef","id":"6b1"},{"op":"(","nodeType":"operator","id":"6b2"},{"nodeType":"localRef","name":"board","localId":"20","id":"6c1"},{"op":",","nodeType":"operator","id":"6b4"},{"op":"1","nodeType":"operator","id":"6b5"},{"op":"2","nodeType":"operator","id":"6b6"},{"op":",","nodeType":"operator","id":"6b7"},{"op":"7","nodeType":"operator","id":"6b8"},{"op":")","nodeType":"operator","id":"6b9"}],"tree":{"name":"initialize square","parent":"code","declId":"K","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6c0"},{"nodeType":"localRef","name":"board","localId":"20","id":"6c1"},{"nodeType":"numberLiteral","value":12,"id":"6c2"},{"nodeType":"numberLiteral","value":7,"id":"6c3"}],"id":"6b"},"locals":[],"nodeType":"exprHolder","id":"6a"},"nodeType":"exprStmt","id":"69"},{"text":"Don't forget to post the board to the wall to see it!","nodeType":"comment","id":"6c"},{"expr":{"tokens":[{"nodeType":"localRef","name":"board","localId":"20","id":"6g0"},{"name":"post to wall","parent":"Board","nodeType":"propertyRef","id":"6f1"}],"tree":{"name":"post to wall","parent":"Board","nodeType":"call","args":[{"nodeType":"localRef","name":"board","localId":"20","id":"6g0"}],"id":"6f"},"locals":[],"nodeType":"exprHolder","id":"6e"},"nodeType":"exprStmt","id":"6d"},{"text":"### adding pieces","nodeType":"comment","id":"6g"},{"text":"A piece can be any sprite from the board. Simply call the `move piece to` action to position the piece on the board.","nodeType":"comment","id":"6h"},{"expr":{"tokens":[{"nodeType":"localRef","name":"piece","localId":"21","id":"6l0"},{"op":":=","nodeType":"operator","id":"6k1"},{"nodeType":"localRef","name":"board","localId":"20","id":"6l20"},{"name":"create ellipse","parent":"Board","nodeType":"propertyRef","id":"6k3"},{"op":"(","nodeType":"operator","id":"6k4"},{"op":"5","nodeType":"operator","id":"6k5"},{"op":"0","nodeType":"operator","id":"6k6"},{"op":",","nodeType":"operator","id":"6k7"},{"op":"5","nodeType":"operator","id":"6k8"},{"op":"0","nodeType":"operator","id":"6k9"},{"op":")","nodeType":"operator","id":"6ka"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"piece","localId":"21","id":"6l0"},{"name":"create ellipse","parent":"Board","nodeType":"call","args":[{"nodeType":"localRef","name":"board","localId":"20","id":"6l20"},{"nodeType":"numberLiteral","value":50,"id":"6l21"},{"nodeType":"numberLiteral","value":50,"id":"6l22"}],"id":"6l1"}],"id":"6k"},"locals":[{"name":"piece","type":"Sprite","nodeType":"localDef","id":"21"}],"nodeType":"exprHolder","id":"6j"},"nodeType":"exprStmt","id":"6i"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6o0"},{"name":"move piece to","parent":"code","declId":"c","nodeType":"propertyRef","id":"6n1"},{"op":"(","nodeType":"operator","id":"6n2"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6o1"},{"op":",","nodeType":"operator","id":"6n4"},{"op":"3","nodeType":"operator","id":"6n5"},{"op":",","nodeType":"operator","id":"6n6"},{"op":"3","nodeType":"operator","id":"6n7"},{"op":")","nodeType":"operator","id":"6n8"}],"tree":{"name":"move piece to","parent":"code","declId":"c","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6o0"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6o1"},{"nodeType":"numberLiteral","value":3,"id":"6o2"},{"nodeType":"numberLiteral","value":3,"id":"6o3"}],"id":"6n"},"locals":[],"nodeType":"exprHolder","id":"6m"},"nodeType":"exprStmt","id":"6l"},{"text":"### moving pieces","nodeType":"comment","id":"6o"},{"text":"A piece can be moved from tile to tile by breaking the move into single piece move. Advanced move strategies are available in specialized libraries.","nodeType":"comment","id":"6p"},{"text":"In this example, we move the piece right until we reach the right side and move up.","nodeType":"comment","id":"6q"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6u0"},{"name":"move piece to","parent":"code","declId":"c","nodeType":"propertyRef","id":"6t1"},{"op":"(","nodeType":"operator","id":"6t2"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6u1"},{"op":",","nodeType":"operator","id":"6t4"},{"op":"3","nodeType":"operator","id":"6t5"},{"op":",","nodeType":"operator","id":"6t6"},{"op":"4","nodeType":"operator","id":"6t7"},{"op":")","nodeType":"operator","id":"6t8"}],"tree":{"name":"move piece to","parent":"code","declId":"c","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6u0"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6u1"},{"nodeType":"numberLiteral","value":3,"id":"6u2"},{"nodeType":"numberLiteral","value":4,"id":"6u3"}],"id":"6t"},"locals":[],"nodeType":"exprHolder","id":"6s"},"nodeType":"exprStmt","id":"6r"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6x0"},{"name":"move piece to","parent":"code","declId":"c","nodeType":"propertyRef","id":"6w1"},{"op":"(","nodeType":"operator","id":"6w2"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6x1"},{"op":",","nodeType":"operator","id":"6w4"},{"op":"3","nodeType":"operator","id":"6w5"},{"op":",","nodeType":"operator","id":"6w6"},{"op":"5","nodeType":"operator","id":"6w7"},{"op":")","nodeType":"operator","id":"6w8"}],"tree":{"name":"move piece to","parent":"code","declId":"c","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6x0"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6x1"},{"nodeType":"numberLiteral","value":3,"id":"6x2"},{"nodeType":"numberLiteral","value":5,"id":"6x3"}],"id":"6w"},"locals":[],"nodeType":"exprHolder","id":"6v"},"nodeType":"exprStmt","id":"6u"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6A0"},{"name":"move piece to","parent":"code","declId":"c","nodeType":"propertyRef","id":"6z1"},{"op":"(","nodeType":"operator","id":"6z2"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6A1"},{"op":",","nodeType":"operator","id":"6z4"},{"op":"3","nodeType":"operator","id":"6z5"},{"op":",","nodeType":"operator","id":"6z6"},{"op":"6","nodeType":"operator","id":"6z7"},{"op":")","nodeType":"operator","id":"6z8"}],"tree":{"name":"move piece to","parent":"code","declId":"c","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6A0"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6A1"},{"nodeType":"numberLiteral","value":3,"id":"6A2"},{"nodeType":"numberLiteral","value":6,"id":"6A3"}],"id":"6z"},"locals":[],"nodeType":"exprHolder","id":"6y"},"nodeType":"exprStmt","id":"6x"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6D0"},{"name":"move piece to","parent":"code","declId":"c","nodeType":"propertyRef","id":"6C1"},{"op":"(","nodeType":"operator","id":"6C2"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6D1"},{"op":",","nodeType":"operator","id":"6C4"},{"op":"2","nodeType":"operator","id":"6C5"},{"op":",","nodeType":"operator","id":"6C6"},{"op":"6","nodeType":"operator","id":"6C7"},{"op":")","nodeType":"operator","id":"6C8"}],"tree":{"name":"move piece to","parent":"code","declId":"c","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6D0"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6D1"},{"nodeType":"numberLiteral","value":2,"id":"6D2"},{"nodeType":"numberLiteral","value":6,"id":"6D3"}],"id":"6C"},"locals":[],"nodeType":"exprHolder","id":"6B"},"nodeType":"exprStmt","id":"6A"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6G0"},{"name":"move piece to","parent":"code","declId":"c","nodeType":"propertyRef","id":"6F1"},{"op":"(","nodeType":"operator","id":"6F2"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6G1"},{"op":",","nodeType":"operator","id":"6F4"},{"op":"2","nodeType":"operator","id":"6F5"},{"op":",","nodeType":"operator","id":"6F6"},{"op":"5","nodeType":"operator","id":"6F7"},{"op":")","nodeType":"operator","id":"6F8"}],"tree":{"name":"move piece to","parent":"code","declId":"c","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"6G0"},{"nodeType":"localRef","name":"piece","localId":"21","id":"6G1"},{"nodeType":"numberLiteral","value":2,"id":"6G2"},{"nodeType":"numberLiteral","value":5,"id":"6G3"}],"id":"6F"},"locals":[],"nodeType":"exprHolder","id":"6E"},"nodeType":"exprStmt","id":"6D"},{"text":"## Tap events on tiles","nodeType":"comment","id":"6G"},{"text":"To receive tap events on tile, call the `tiles` action to receive the sprite set that contains the tile and store it in `data`. Afterwards, you can simply attach a `tap` event on that variable.","nodeType":"comment","id":"6H"},{"expr":{"tokens":[],"tree":{"nodeType":"singletonRef","name":"$skip","type":"Unknown","id":"6K"},"locals":[],"nodeType":"exprHolder","id":"6J"},"nodeType":"exprStmt","id":"6I"}],"id":"1"},{"name":"initialize","inParameters":[{"name":"board","type":"Board","nodeType":"localDef","id":"70"},{"name":"left","type":"Number","nodeType":"localDef","id":"71"},{"name":"top","type":"Number","nodeType":"localDef","id":"72"},{"name":"width","type":"Number","nodeType":"localDef","id":"73"},{"name":"height","type":"Number","nodeType":"localDef","id":"74"},{"name":"rows","type":"Number","nodeType":"localDef","id":"75"},{"name":"columns","type":"Number","nodeType":"localDef","id":"76"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Initializes the game board","nodeType":"comment","id":"b0"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"b410"},{"name":"board","parent":"data","declId":"t","nodeType":"propertyRef","id":"b31"},{"op":":=","nodeType":"operator","id":"b32"},{"nodeType":"localRef","name":"board","localId":"70","id":"b41"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"board","parent":"data","declId":"t","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"b410"}],"id":"b40"},{"nodeType":"localRef","name":"board","localId":"70","id":"b41"}],"id":"b3"},"locals":[],"nodeType":"exprHolder","id":"b2"},"nodeType":"exprStmt","id":"b1"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"b710"},{"name":"left","parent":"data","declId":"n","nodeType":"propertyRef","id":"b61"},{"op":":=","nodeType":"operator","id":"b62"},{"nodeType":"localRef","name":"left","localId":"71","id":"b71"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"left","parent":"data","declId":"n","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"b710"}],"id":"b70"},{"nodeType":"localRef","name":"left","localId":"71","id":"b71"}],"id":"b6"},"locals":[],"nodeType":"exprHolder","id":"b5"},"nodeType":"exprStmt","id":"b4"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"ba10"},{"name":"top","parent":"data","declId":"o","nodeType":"propertyRef","id":"b91"},{"op":":=","nodeType":"operator","id":"b92"},{"nodeType":"localRef","name":"top","localId":"72","id":"ba1"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"top","parent":"data","declId":"o","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"ba10"}],"id":"ba0"},{"nodeType":"localRef","name":"top","localId":"72","id":"ba1"}],"id":"b9"},"locals":[],"nodeType":"exprHolder","id":"b8"},"nodeType":"exprStmt","id":"b7"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bd10"},{"name":"width","parent":"data","declId":"p","nodeType":"propertyRef","id":"bc1"},{"op":":=","nodeType":"operator","id":"bc2"},{"nodeType":"localRef","name":"width","localId":"73","id":"bd1"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"width","parent":"data","declId":"p","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bd10"}],"id":"bd0"},{"nodeType":"localRef","name":"width","localId":"73","id":"bd1"}],"id":"bc"},"locals":[],"nodeType":"exprHolder","id":"bb"},"nodeType":"exprStmt","id":"ba"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bg10"},{"name":"height","parent":"data","declId":"q","nodeType":"propertyRef","id":"bf1"},{"op":":=","nodeType":"operator","id":"bf2"},{"nodeType":"localRef","name":"height","localId":"74","id":"bg1"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"height","parent":"data","declId":"q","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bg10"}],"id":"bg0"},{"nodeType":"localRef","name":"height","localId":"74","id":"bg1"}],"id":"bf"},"locals":[],"nodeType":"exprHolder","id":"be"},"nodeType":"exprStmt","id":"bd"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bj10"},{"name":"rows","parent":"data","declId":"r","nodeType":"propertyRef","id":"bi1"},{"op":":=","nodeType":"operator","id":"bi2"},{"nodeType":"localRef","name":"rows","localId":"75","id":"bj1"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"rows","parent":"data","declId":"r","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bj10"}],"id":"bj0"},{"nodeType":"localRef","name":"rows","localId":"75","id":"bj1"}],"id":"bi"},"locals":[],"nodeType":"exprHolder","id":"bh"},"nodeType":"exprStmt","id":"bg"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bm10"},{"name":"columns","parent":"data","declId":"s","nodeType":"propertyRef","id":"bl1"},{"op":":=","nodeType":"operator","id":"bl2"},{"nodeType":"localRef","name":"columns","localId":"76","id":"bm1"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"columns","parent":"data","declId":"s","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bm10"}],"id":"bm0"},{"nodeType":"localRef","name":"columns","localId":"76","id":"bm1"}],"id":"bl"},"locals":[],"nodeType":"exprHolder","id":"bk"},"nodeType":"exprStmt","id":"bj"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bp10"},{"name":"tile width","parent":"data","declId":"w","nodeType":"propertyRef","id":"bo1"},{"op":":=","nodeType":"operator","id":"bo2"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bp210"},{"name":"width","parent":"data","declId":"p","nodeType":"propertyRef","id":"bo4"},{"op":"/","nodeType":"operator","id":"bo5"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bp220"},{"name":"columns","parent":"data","declId":"s","nodeType":"propertyRef","id":"bo7"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"tile width","parent":"data","declId":"w","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bp10"}],"id":"bp0"},{"name":"/","parent":"Number","nodeType":"call","args":[{"name":"width","parent":"data","declId":"p","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bp210"}],"id":"bp20"},{"name":"columns","parent":"data","declId":"s","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bp220"}],"id":"bp21"}],"id":"bp1"}],"id":"bo"},"locals":[],"nodeType":"exprHolder","id":"bn"},"nodeType":"exprStmt","id":"bm"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bs10"},{"name":"tile height","parent":"data","declId":"x","nodeType":"propertyRef","id":"br1"},{"op":":=","nodeType":"operator","id":"br2"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bs210"},{"name":"height","parent":"data","declId":"q","nodeType":"propertyRef","id":"br4"},{"op":"/","nodeType":"operator","id":"br5"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bs220"},{"name":"rows","parent":"data","declId":"r","nodeType":"propertyRef","id":"br7"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"tile height","parent":"data","declId":"x","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bs10"}],"id":"bs0"},{"name":"/","parent":"Number","nodeType":"call","args":[{"name":"height","parent":"data","declId":"q","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bs210"}],"id":"bs20"},{"name":"rows","parent":"data","declId":"r","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bs220"}],"id":"bs21"}],"id":"bs1"}],"id":"br"},"locals":[],"nodeType":"exprHolder","id":"bq"},"nodeType":"exprStmt","id":"bp"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bv10"},{"name":"_pieces","parent":"data","declId":"h","nodeType":"propertyRef","id":"bu1"},{"op":":=","nodeType":"operator","id":"bu2"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bv210"},{"name":"board","parent":"data","declId":"t","nodeType":"propertyRef","id":"bu4"},{"name":"create sprite set","parent":"Board","nodeType":"propertyRef","id":"bu5"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"_pieces","parent":"data","declId":"h","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bv10"}],"id":"bv0"},{"name":"create sprite set","parent":"Board","nodeType":"call","args":[{"name":"board","parent":"data","declId":"t","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bv210"}],"id":"bv20"}],"id":"bv1"}],"id":"bu"},"locals":[],"nodeType":"exprHolder","id":"bt"},"nodeType":"exprStmt","id":"bs"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"by10"},{"name":"_tiles","parent":"data","declId":"v","nodeType":"propertyRef","id":"bx1"},{"op":":=","nodeType":"operator","id":"bx2"},{"nodeType":"singletonRef","name":"data","type":"data","id":"by210"},{"name":"board","parent":"data","declId":"t","nodeType":"propertyRef","id":"bx4"},{"name":"create sprite set","parent":"Board","nodeType":"propertyRef","id":"bx5"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"_tiles","parent":"data","declId":"v","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"by10"}],"id":"by0"},{"name":"create sprite set","parent":"Board","nodeType":"call","args":[{"name":"board","parent":"data","declId":"t","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"by210"}],"id":"by20"}],"id":"by1"}],"id":"bx"},"locals":[],"nodeType":"exprHolder","id":"bw"},"nodeType":"exprStmt","id":"bv"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bB10"},{"name":"margin","parent":"data","declId":"E","nodeType":"propertyRef","id":"bA1"},{"op":":=","nodeType":"operator","id":"bA2"},{"op":"8","nodeType":"operator","id":"bA3"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"margin","parent":"data","declId":"E","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bB10"}],"id":"bB0"},{"nodeType":"numberLiteral","value":8,"id":"bB1"}],"id":"bA"},"locals":[],"nodeType":"exprHolder","id":"bz"},"nodeType":"exprStmt","id":"by"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bE10"},{"name":"move duration","parent":"data","declId":"76.","nodeType":"propertyRef","id":"bD1"},{"op":":=","nodeType":"operator","id":"bD2"},{"op":"0","nodeType":"operator","id":"bD3"},{"op":".","nodeType":"operator","id":"bD4"},{"op":"3","nodeType":"operator","id":"bD5"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"move duration","parent":"data","declId":"76.","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bE10"}],"id":"bE0"},{"nodeType":"numberLiteral","value":0.3,"id":"bE1"}],"id":"bD"},"locals":[],"nodeType":"exprHolder","id":"bC"},"nodeType":"exprStmt","id":"bB"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"♻","type":"♻","id":"bH10"},{"name":"animations","parent":"♻","declId":"82.","nodeType":"propertyRef","id":"bG1"},{"name":"initialize","parent":"animations","declId":"84.f","nodeType":"propertyRef","id":"bG2"},{"op":"(","nodeType":"operator","id":"bG3"},{"nodeType":"localRef","name":"board","localId":"70","id":"bH1"},{"op":")","nodeType":"operator","id":"bG5"}],"tree":{"name":"initialize","parent":"animations","declId":"84.f","nodeType":"call","args":[{"name":"animations","parent":"♻","declId":"82.","nodeType":"call","args":[{"nodeType":"singletonRef","name":"♻","type":"♻","id":"bH10"}],"id":"bH0"},{"nodeType":"localRef","name":"board","localId":"70","id":"bH1"}],"id":"bG"},"locals":[],"nodeType":"exprHolder","id":"bF"},"nodeType":"exprStmt","id":"bE"},{"expr":{"tokens":[{"nodeType":"localRef","name":"tw","localId":"77","id":"bK0"},{"op":":=","nodeType":"operator","id":"bJ1"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bK210"},{"name":"tile width","parent":"data","declId":"w","nodeType":"propertyRef","id":"bJ3"},{"op":"-","nodeType":"operator","id":"bJ4"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bK220"},{"name":"margin","parent":"data","declId":"E","nodeType":"propertyRef","id":"bJ6"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"tw","localId":"77","id":"bK0"},{"name":"-","parent":"Number","nodeType":"call","args":[{"name":"tile width","parent":"data","declId":"w","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bK210"}],"id":"bK20"},{"name":"margin","parent":"data","declId":"E","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bK220"}],"id":"bK21"}],"id":"bK1"}],"id":"bJ"},"locals":[{"name":"tw","type":"Number","nodeType":"localDef","id":"77"}],"nodeType":"exprHolder","id":"bI"},"nodeType":"exprStmt","id":"bH"},{"expr":{"tokens":[{"nodeType":"localRef","name":"th","localId":"78","id":"bN0"},{"op":":=","nodeType":"operator","id":"bM1"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bN210"},{"name":"tile height","parent":"data","declId":"x","nodeType":"propertyRef","id":"bM3"},{"op":"-","nodeType":"operator","id":"bM4"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bN220"},{"name":"margin","parent":"data","declId":"E","nodeType":"propertyRef","id":"bM6"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"th","localId":"78","id":"bN0"},{"name":"-","parent":"Number","nodeType":"call","args":[{"name":"tile height","parent":"data","declId":"x","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bN210"}],"id":"bN20"},{"name":"margin","parent":"data","declId":"E","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bN220"}],"id":"bN21"}],"id":"bN1"}],"id":"bM"},"locals":[{"name":"th","type":"Number","nodeType":"localDef","id":"78"}],"nodeType":"exprHolder","id":"bL"},"nodeType":"exprStmt","id":"bK"},{"index":{"name":"i","type":"Number","nodeType":"localDef","id":"79"},"bound":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bQ0"},{"name":"rows","parent":"data","declId":"r","nodeType":"propertyRef","id":"bP1"}],"tree":{"name":"rows","parent":"data","declId":"r","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bQ0"}],"id":"bP"},"locals":[],"nodeType":"exprHolder","id":"bO"},"body":[{"index":{"name":"j","type":"Number","nodeType":"localDef","id":"7a"},"bound":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bR30"},{"name":"columns","parent":"data","declId":"s","nodeType":"propertyRef","id":"bR21"}],"tree":{"name":"columns","parent":"data","declId":"s","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bR30"}],"id":"bR2"},"locals":[],"nodeType":"exprHolder","id":"bR1"},"body":[{"expr":{"tokens":[{"nodeType":"localRef","name":"tile1","localId":"7b","id":"bR430"},{"op":":=","nodeType":"operator","id":"bR421"},{"nodeType":"singletonRef","name":"data","type":"data","id":"bR43210"},{"name":"board","parent":"data","declId":"t","nodeType":"propertyRef","id":"bR423"},{"name":"create rectangle","parent":"Board","nodeType":"propertyRef","id":"bR424"},{"op":"(","nodeType":"operator","id":"bR425"},{"nodeType":"localRef","name":"tw","localId":"77","id":"bR4321"},{"op":",","nodeType":"operator","id":"bR427"},{"nodeType":"localRef","name":"th","localId":"78","id":"bR4322"},{"op":")","nodeType":"operator","id":"bR429"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"tile1","localId":"7b","id":"bR430"},{"name":"create rectangle","parent":"Board","nodeType":"call","args":[{"name":"board","parent":"data","declId":"t","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"bR43210"}],"id":"bR4320"},{"nodeType":"localRef","name":"tw","localId":"77","id":"bR4321"},{"nodeType":"localRef","name":"th","localId":"78","id":"bR4322"}],"id":"bR431"}],"id":"bR42"},"locals":[{"name":"tile1","type":"Sprite","nodeType":"localDef","id":"7b"}],"nodeType":"exprHolder","id":"bR41"},"nodeType":"exprStmt","id":"bR40"},{"expr":{"tokens":[{"nodeType":"localRef","name":"tile1","localId":"7b","id":"bR460"},{"name":"set color","parent":"Sprite","nodeType":"propertyRef","id":"bR451"},{"op":"(","nodeType":"operator","id":"bR452"},{"nodeType":"singletonRef","name":"colors","type":"Colors","id":"bR4620"},{"name":"foreground","parent":"Colors","nodeType":"propertyRef","id":"bR454"},{"op":")","nodeType":"operator","id":"bR455"}],"tree":{"name":"set color","parent":"Sprite","nodeType":"call","args":[{"nodeType":"localRef","name":"tile1","localId":"7b","id":"bR460"},{"name":"foreground","parent":"Colors","nodeType":"call","args":[{"nodeType":"singletonRef","name":"colors","type":"Colors","id":"bR4620"}],"id":"bR461"}],"id":"bR45"},"locals":[],"nodeType":"exprHolder","id":"bR44"},"nodeType":"exprStmt","id":"bR43"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"bR490"},{"name":"set tile","parent":"code","declId":"y","nodeType":"propertyRef","id":"bR481"},{"op":"(","nodeType":"operator","id":"bR482"},{"nodeType":"localRef","name":"tile1","localId":"7b","id":"bR491"},{"op":",","nodeType":"operator","id":"bR484"},{"nodeType":"localRef","name":"i","localId":"79","id":"bR492"},{"op":",","nodeType":"operator","id":"bR486"},{"nodeType":"localRef","name":"j","localId":"7a","id":"bR493"},{"op":")","nodeType":"operator","id":"bR488"}],"tree":{"name":"set tile","parent":"code","declId":"y","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"bR490"},{"nodeType":"localRef","name":"tile1","localId":"7b","id":"bR491"},{"nodeType":"localRef","name":"i","localId":"79","id":"bR492"},{"nodeType":"localRef","name":"j","localId":"7a","id":"bR493"}],"id":"bR48"},"locals":[],"nodeType":"exprHolder","id":"bR47"},"nodeType":"exprStmt","id":"bR46"}],"nodeType":"for","id":"bR0"}],"nodeType":"for","id":"bN"}],"id":"6"},{"nodeType":"record","name":"thing","comment":"","category":"decorator","isCloudEnabled":false,"keys":[{"nodeType":"recordKey","name":"target","type":"Sprite","id":"c10"}],"fields":[{"nodeType":"recordField","name":"row","type":"Number","id":"c20"},{"nodeType":"recordField","name":"column","type":"Number","id":"c21"}],"id":"b"},{"name":"move piece to","inParameters":[{"name":"piece","type":"Sprite","nodeType":"localDef","id":"d0"},{"name":"row","type":"Number","nodeType":"localDef","id":"d1"},{"name":"column","type":"Number","nodeType":"localDef","id":"d2"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Moves the piece to the specified tile. If the position is outside the board, the piece is removed.","nodeType":"comment","id":"h0"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"h410"},{"name":"_pieces","parent":"data","declId":"h","nodeType":"propertyRef","id":"h31"},{"name":"add","parent":"Sprite Set","nodeType":"propertyRef","id":"h32"},{"op":"(","nodeType":"operator","id":"h33"},{"nodeType":"localRef","name":"piece","localId":"d0","id":"h41"},{"op":")","nodeType":"operator","id":"h35"}],"tree":{"name":"add","parent":"Sprite Set","nodeType":"call","args":[{"name":"_pieces","parent":"data","declId":"h","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"h410"}],"id":"h40"},{"nodeType":"localRef","name":"piece","localId":"d0","id":"h41"}],"id":"h3"},"locals":[],"nodeType":"exprHolder","id":"h2"},"nodeType":"exprStmt","id":"h1"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"h70"},{"name":"set pos","parent":"code","declId":"i","nodeType":"propertyRef","id":"h61"},{"op":"(","nodeType":"operator","id":"h62"},{"nodeType":"localRef","name":"piece","localId":"d0","id":"h71"},{"op":",","nodeType":"operator","id":"h64"},{"nodeType":"localRef","name":"row","localId":"d1","id":"h72"},{"op":",","nodeType":"operator","id":"h66"},{"nodeType":"localRef","name":"column","localId":"d2","id":"h73"},{"op":",","nodeType":"operator","id":"h68"},{"nodeType":"booleanLiteral","value":true,"id":"h74"},{"op":")","nodeType":"operator","id":"h6a"}],"tree":{"name":"set pos","parent":"code","declId":"i","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"h70"},{"nodeType":"localRef","name":"piece","localId":"d0","id":"h71"},{"nodeType":"localRef","name":"row","localId":"d1","id":"h72"},{"nodeType":"localRef","name":"column","localId":"d2","id":"h73"},{"nodeType":"booleanLiteral","value":true,"id":"h74"}],"id":"h6"},"locals":[],"nodeType":"exprHolder","id":"h5"},"nodeType":"exprStmt","id":"h4"},{"expr":{"tokens":[{"nodeType":"localRef","name":"t","localId":"d3","id":"ha0"},{"op":":=","nodeType":"operator","id":"h91"},{"nodeType":"singletonRef","name":"records","type":"records","id":"ha210"},{"name":"Sprite decorator","parent":"records","declId":"b","nodeType":"propertyRef","id":"h93"},{"name":"at","parent":"Sprite decorator","nodeType":"propertyRef","id":"h94"},{"op":"(","nodeType":"operator","id":"h95"},{"nodeType":"localRef","name":"piece","localId":"d0","id":"ha21"},{"op":")","nodeType":"operator","id":"h97"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"d3","id":"ha0"},{"name":"at","parent":"Sprite decorator","nodeType":"call","args":[{"name":"Sprite decorator","parent":"records","declId":"b","nodeType":"call","args":[{"nodeType":"singletonRef","name":"records","type":"records","id":"ha210"}],"id":"ha20"},{"nodeType":"localRef","name":"piece","localId":"d0","id":"ha21"}],"id":"ha1"}],"id":"h9"},"locals":[{"name":"t","type":"thing","nodeType":"localDef","id":"d3"}],"nodeType":"exprHolder","id":"h8"},"nodeType":"exprStmt","id":"h7"},{"expr":{"tokens":[{"nodeType":"localRef","name":"t","localId":"d3","id":"hd10"},{"name":"row","parent":"thing","nodeType":"propertyRef","id":"hc1"},{"name":"set","parent":"Number field","nodeType":"propertyRef","id":"hc2"},{"op":"(","nodeType":"operator","id":"hc3"},{"nodeType":"localRef","name":"row","localId":"d1","id":"hd1"},{"op":")","nodeType":"operator","id":"hc5"}],"tree":{"name":"set","parent":"Number field","nodeType":"call","args":[{"name":"row","parent":"thing","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"d3","id":"hd10"}],"id":"hd0"},{"nodeType":"localRef","name":"row","localId":"d1","id":"hd1"}],"id":"hc"},"locals":[],"nodeType":"exprHolder","id":"hb"},"nodeType":"exprStmt","id":"ha"},{"expr":{"tokens":[{"nodeType":"localRef","name":"t","localId":"d3","id":"hg10"},{"name":"column","parent":"thing","nodeType":"propertyRef","id":"hf1"},{"name":"set","parent":"Number field","nodeType":"propertyRef","id":"hf2"},{"op":"(","nodeType":"operator","id":"hf3"},{"nodeType":"localRef","name":"column","localId":"d2","id":"hg1"},{"op":")","nodeType":"operator","id":"hf5"}],"tree":{"name":"set","parent":"Number field","nodeType":"call","args":[{"name":"column","parent":"thing","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"d3","id":"hg10"}],"id":"hg0"},{"nodeType":"localRef","name":"column","localId":"d2","id":"hg1"}],"id":"hf"},"locals":[],"nodeType":"exprHolder","id":"he"},"nodeType":"exprStmt","id":"hd"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"hj10"},{"name":"board","parent":"data","declId":"t","nodeType":"propertyRef","id":"hi1"},{"name":"update on wall","parent":"Board","nodeType":"propertyRef","id":"hi2"}],"tree":{"name":"update on wall","parent":"Board","nodeType":"call","args":[{"name":"board","parent":"data","declId":"t","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"hj10"}],"id":"hj0"}],"id":"hi"},"locals":[],"nodeType":"exprHolder","id":"hh"},"nodeType":"exprStmt","id":"hg"}],"id":"c"},{"name":"_pieces","comment":"","type":"Sprite Set","isReadonly":false,"nodeType":"data","id":"h"},{"name":"set pos","inParameters":[{"name":"sprite","type":"Sprite","nodeType":"localDef","id":"j0"},{"name":"row","type":"Number","nodeType":"localDef","id":"j1"},{"name":"column","type":"Number","nodeType":"localDef","id":"j2"},{"name":"animate","type":"Boolean","nodeType":"localDef","id":"j3"}],"outParameters":[],"isPrivate":true,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"expr":{"tokens":[{"nodeType":"localRef","name":"x","localId":"j4","id":"n30"},{"op":":=","nodeType":"operator","id":"n21"},{"nodeType":"singletonRef","name":"data","type":"data","id":"n3210"},{"name":"left","parent":"data","declId":"n","nodeType":"propertyRef","id":"n23"},{"op":"+","nodeType":"operator","id":"n24"},{"nodeType":"singletonRef","name":"data","type":"data","id":"n32210"},{"name":"tile width","parent":"data","declId":"w","nodeType":"propertyRef","id":"n26"},{"op":"*","nodeType":"operator","id":"n27"},{"op":"(","nodeType":"operator","id":"n28"},{"nodeType":"localRef","name":"column","localId":"j2","id":"n32220"},{"op":"+","nodeType":"operator","id":"n2a"},{"op":"0","nodeType":"operator","id":"n2b"},{"op":".","nodeType":"operator","id":"n2c"},{"op":"5","nodeType":"operator","id":"n2d"},{"op":")","nodeType":"operator","id":"n2e"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"x","localId":"j4","id":"n30"},{"name":"+","parent":"Number","nodeType":"call","args":[{"name":"left","parent":"data","declId":"n","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"n3210"}],"id":"n320"},{"name":"*","parent":"Number","nodeType":"call","args":[{"name":"tile width","parent":"data","declId":"w","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"n32210"}],"id":"n3220"},{"name":"+","parent":"Number","nodeType":"call","args":[{"nodeType":"localRef","name":"column","localId":"j2","id":"n32220"},{"nodeType":"numberLiteral","value":0.5,"id":"n32221"}],"id":"n3221"}],"id":"n321"}],"id":"n31"}],"id":"n2"},"locals":[{"name":"x","type":"Number","nodeType":"localDef","id":"j4"}],"nodeType":"exprHolder","id":"n1"},"nodeType":"exprStmt","id":"n0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"y","localId":"j5","id":"n60"},{"op":":=","nodeType":"operator","id":"n51"},{"nodeType":"singletonRef","name":"data","type":"data","id":"n6210"},{"name":"top","parent":"data","declId":"o","nodeType":"propertyRef","id":"n53"},{"op":"+","nodeType":"operator","id":"n54"},{"nodeType":"singletonRef","name":"data","type":"data","id":"n62210"},{"name":"tile height","parent":"data","declId":"x","nodeType":"propertyRef","id":"n56"},{"op":"*","nodeType":"operator","id":"n57"},{"op":"(","nodeType":"operator","id":"n58"},{"nodeType":"localRef","name":"row","localId":"j1","id":"n62220"},{"op":"+","nodeType":"operator","id":"n5a"},{"op":"0","nodeType":"operator","id":"n5b"},{"op":".","nodeType":"operator","id":"n5c"},{"op":"5","nodeType":"operator","id":"n5d"},{"op":")","nodeType":"operator","id":"n5e"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"y","localId":"j5","id":"n60"},{"name":"+","parent":"Number","nodeType":"call","args":[{"name":"top","parent":"data","declId":"o","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"n6210"}],"id":"n620"},{"name":"*","parent":"Number","nodeType":"call","args":[{"name":"tile height","parent":"data","declId":"x","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"n62210"}],"id":"n6220"},{"name":"+","parent":"Number","nodeType":"call","args":[{"nodeType":"localRef","name":"row","localId":"j1","id":"n62220"},{"nodeType":"numberLiteral","value":0.5,"id":"n62221"}],"id":"n6221"}],"id":"n621"}],"id":"n61"}],"id":"n5"},"locals":[{"name":"y","type":"Number","nodeType":"localDef","id":"j5"}],"nodeType":"exprHolder","id":"n4"},"nodeType":"exprStmt","id":"n3"},{"condition":{"tokens":[{"nodeType":"localRef","name":"animate","localId":"j3","id":"n8"}],"tree":{"nodeType":"localRef","name":"animate","localId":"j3","id":"n8"},"locals":[],"nodeType":"exprHolder","id":"n7"},"thenBody":[{"expr":{"tokens":[{"nodeType":"singletonRef","name":"♻","type":"♻","id":"na310"},{"name":"animations","parent":"♻","declId":"82.","nodeType":"propertyRef","id":"na21"},{"name":"move to","parent":"animations","declId":"84.u","nodeType":"propertyRef","id":"na22"},{"op":"(","nodeType":"operator","id":"na23"},{"nodeType":"localRef","name":"sprite","localId":"j0","id":"na31"},{"op":",","nodeType":"operator","id":"na25"},{"nodeType":"localRef","name":"x","localId":"j4","id":"na32"},{"op":",","nodeType":"operator","id":"na27"},{"nodeType":"localRef","name":"y","localId":"j5","id":"na33"},{"op":",","nodeType":"operator","id":"na29"},{"nodeType":"singletonRef","name":"data","type":"data","id":"na350"},{"name":"move duration","parent":"data","declId":"76.","nodeType":"propertyRef","id":"na2b"},{"op":")","nodeType":"operator","id":"na2c"}],"tree":{"name":"move to","parent":"animations","declId":"84.u","nodeType":"call","args":[{"name":"animations","parent":"♻","declId":"82.","nodeType":"call","args":[{"nodeType":"singletonRef","name":"♻","type":"♻","id":"na310"}],"id":"na30"},{"nodeType":"localRef","name":"sprite","localId":"j0","id":"na31"},{"nodeType":"localRef","name":"x","localId":"j4","id":"na32"},{"nodeType":"localRef","name":"y","localId":"j5","id":"na33"},{"name":"move duration","parent":"data","declId":"76.","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"na350"}],"id":"na34"}],"id":"na2"},"locals":[],"nodeType":"exprHolder","id":"na1"},"nodeType":"exprStmt","id":"na0"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"♻","type":"♻","id":"na610"},{"name":"animations","parent":"♻","declId":"82.","nodeType":"propertyRef","id":"na51"},{"name":"flush","parent":"animations","declId":"84.p","nodeType":"propertyRef","id":"na52"},{"op":"(","nodeType":"operator","id":"na53"},{"nodeType":"booleanLiteral","value":false,"id":"na61"},{"op":")","nodeType":"operator","id":"na55"}],"tree":{"name":"flush","parent":"animations","declId":"84.p","nodeType":"call","args":[{"name":"animations","parent":"♻","declId":"82.","nodeType":"call","args":[{"nodeType":"singletonRef","name":"♻","type":"♻","id":"na610"}],"id":"na60"},{"nodeType":"booleanLiteral","value":false,"id":"na61"}],"id":"na5"},"locals":[],"nodeType":"exprHolder","id":"na4"},"nodeType":"exprStmt","id":"na3"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"time","type":"Time","id":"na90"},{"name":"sleep","parent":"Time","nodeType":"propertyRef","id":"na81"},{"op":"(","nodeType":"operator","id":"na82"},{"op":"0","nodeType":"operator","id":"na83"},{"op":".","nodeType":"operator","id":"na84"},{"op":"2","nodeType":"operator","id":"na85"},{"op":")","nodeType":"operator","id":"na86"}],"tree":{"name":"sleep","parent":"Time","nodeType":"call","args":[{"nodeType":"singletonRef","name":"time","type":"Time","id":"na90"},{"nodeType":"numberLiteral","value":0.2,"id":"na91"}],"id":"na8"},"locals":[],"nodeType":"exprHolder","id":"na7"},"nodeType":"exprStmt","id":"na6"}],"elseBody":[{"expr":{"tokens":[],"tree":{"nodeType":"singletonRef","name":"$skip","type":"Unknown","id":"nb2"},"locals":[],"nodeType":"exprHolder","id":"nb1"},"nodeType":"exprStmt","id":"nb0"}],"nodeType":"if","id":"n6"},{"expr":{"tokens":[{"nodeType":"localRef","name":"sprite","localId":"j0","id":"ne0"},{"name":"set pos","parent":"Sprite","nodeType":"propertyRef","id":"nd1"},{"op":"(","nodeType":"operator","id":"nd2"},{"nodeType":"localRef","name":"x","localId":"j4","id":"ne1"},{"op":",","nodeType":"operator","id":"nd4"},{"nodeType":"localRef","name":"y","localId":"j5","id":"ne2"},{"op":")","nodeType":"operator","id":"nd6"}],"tree":{"name":"set pos","parent":"Sprite","nodeType":"call","args":[{"nodeType":"localRef","name":"sprite","localId":"j0","id":"ne0"},{"nodeType":"localRef","name":"x","localId":"j4","id":"ne1"},{"nodeType":"localRef","name":"y","localId":"j5","id":"ne2"}],"id":"nd"},"locals":[],"nodeType":"exprHolder","id":"nc"},"nodeType":"exprStmt","id":"nb"}],"id":"i"},{"name":"left","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"n"},{"name":"top","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"o"},{"name":"width","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"p"},{"name":"height","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"q"},{"name":"rows","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"r"},{"name":"columns","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"s"},{"name":"board","comment":"","type":"Board","isReadonly":false,"nodeType":"data","id":"t"},{"name":"v","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"u"},{"name":"_tiles","comment":"","type":"Sprite Set","isReadonly":false,"nodeType":"data","id":"v"},{"name":"tile width","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"w"},{"name":"tile height","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"x"},{"name":"set tile","inParameters":[{"name":"new","type":"Sprite","nodeType":"localDef","id":"z0"},{"name":"row","type":"Number","nodeType":"localDef","id":"z1"},{"name":"column","type":"Number","nodeType":"localDef","id":"z2"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Replaces a tile in the board","nodeType":"comment","id":"D0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"t","localId":"z3","id":"D40"},{"op":":=","nodeType":"operator","id":"D31"},{"nodeType":"singletonRef","name":"records","type":"records","id":"D4210"},{"name":"tile index","parent":"records","declId":"D","nodeType":"propertyRef","id":"D33"},{"name":"at","parent":"tile index","nodeType":"propertyRef","id":"D34"},{"op":"(","nodeType":"operator","id":"D35"},{"nodeType":"localRef","name":"row","localId":"z1","id":"D421"},{"op":",","nodeType":"operator","id":"D37"},{"nodeType":"localRef","name":"column","localId":"z2","id":"D422"},{"op":")","nodeType":"operator","id":"D39"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"z3","id":"D40"},{"name":"at","parent":"tile index","nodeType":"call","args":[{"name":"tile index","parent":"records","declId":"D","nodeType":"call","args":[{"nodeType":"singletonRef","name":"records","type":"records","id":"D4210"}],"id":"D420"},{"nodeType":"localRef","name":"row","localId":"z1","id":"D421"},{"nodeType":"localRef","name":"column","localId":"z2","id":"D422"}],"id":"D41"}],"id":"D3"},"locals":[{"name":"t","type":"tile","nodeType":"localDef","id":"z3"}],"nodeType":"exprHolder","id":"D2"},"nodeType":"exprStmt","id":"D1"},{"expr":{"tokens":[{"nodeType":"localRef","name":"old","localId":"z4","id":"D70"},{"op":":=","nodeType":"operator","id":"D61"},{"nodeType":"localRef","name":"t","localId":"z3","id":"D7210"},{"name":"tile","parent":"tile","nodeType":"propertyRef","id":"D63"},{"name":"get","parent":"Sprite field","nodeType":"propertyRef","id":"D64"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"old","localId":"z4","id":"D70"},{"name":"get","parent":"Sprite field","nodeType":"call","args":[{"name":"tile","parent":"tile","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"z3","id":"D7210"}],"id":"D720"}],"id":"D71"}],"id":"D6"},"locals":[{"name":"old","type":"Sprite","nodeType":"localDef","id":"z4"}],"nodeType":"exprHolder","id":"D5"},"nodeType":"exprStmt","id":"D4"},{"condition":{"tokens":[{"op":"not","nodeType":"operator","id":"D90"},{"nodeType":"localRef","name":"old","localId":"z4","id":"Da10"},{"name":"is invalid","parent":"Sprite","nodeType":"propertyRef","id":"D92"}],"tree":{"name":"not","parent":"Boolean","nodeType":"call","args":[{"name":"is invalid","parent":"Sprite","nodeType":"call","args":[{"nodeType":"localRef","name":"old","localId":"z4","id":"Da10"}],"id":"Da0"}],"id":"D9"},"locals":[],"nodeType":"exprHolder","id":"D8"},"thenBody":[{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"Db310"},{"name":"_tiles","parent":"data","declId":"v","nodeType":"propertyRef","id":"Db21"},{"name":"remove","parent":"Sprite Set","nodeType":"propertyRef","id":"Db22"},{"op":"(","nodeType":"operator","id":"Db23"},{"nodeType":"localRef","name":"old","localId":"z4","id":"Db31"},{"op":")","nodeType":"operator","id":"Db25"}],"tree":{"name":"remove","parent":"Sprite Set","nodeType":"call","args":[{"name":"_tiles","parent":"data","declId":"v","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"Db310"}],"id":"Db30"},{"nodeType":"localRef","name":"old","localId":"z4","id":"Db31"}],"id":"Db2"},"locals":[],"nodeType":"exprHolder","id":"Db1"},"nodeType":"exprStmt","id":"Db0"}],"elseBody":[{"expr":{"tokens":[],"tree":{"nodeType":"singletonRef","name":"$skip","type":"Unknown","id":"Dc2"},"locals":[],"nodeType":"exprHolder","id":"Dc1"},"nodeType":"exprStmt","id":"Dc0"}],"nodeType":"if","id":"D7"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"Df0"},{"name":"set pos","parent":"code","declId":"i","nodeType":"propertyRef","id":"De1"},{"op":"(","nodeType":"operator","id":"De2"},{"nodeType":"localRef","name":"new","localId":"z0","id":"Df1"},{"op":",","nodeType":"operator","id":"De4"},{"nodeType":"localRef","name":"row","localId":"z1","id":"Df2"},{"op":",","nodeType":"operator","id":"De6"},{"nodeType":"localRef","name":"column","localId":"z2","id":"Df3"},{"op":",","nodeType":"operator","id":"De8"},{"nodeType":"booleanLiteral","value":false,"id":"Df4"},{"op":")","nodeType":"operator","id":"Dea"}],"tree":{"name":"set pos","parent":"code","declId":"i","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"Df0"},{"nodeType":"localRef","name":"new","localId":"z0","id":"Df1"},{"nodeType":"localRef","name":"row","localId":"z1","id":"Df2"},{"nodeType":"localRef","name":"column","localId":"z2","id":"Df3"},{"nodeType":"booleanLiteral","value":false,"id":"Df4"}],"id":"De"},"locals":[],"nodeType":"exprHolder","id":"Dd"},"nodeType":"exprStmt","id":"Dc"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"Di10"},{"name":"_tiles","parent":"data","declId":"v","nodeType":"propertyRef","id":"Dh1"},{"name":"add","parent":"Sprite Set","nodeType":"propertyRef","id":"Dh2"},{"op":"(","nodeType":"operator","id":"Dh3"},{"nodeType":"localRef","name":"new","localId":"z0","id":"Di1"},{"op":")","nodeType":"operator","id":"Dh5"}],"tree":{"name":"add","parent":"Sprite Set","nodeType":"call","args":[{"name":"_tiles","parent":"data","declId":"v","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"Di10"}],"id":"Di0"},{"nodeType":"localRef","name":"new","localId":"z0","id":"Di1"}],"id":"Dh"},"locals":[],"nodeType":"exprHolder","id":"Dg"},"nodeType":"exprStmt","id":"Df"},{"expr":{"tokens":[{"nodeType":"localRef","name":"t","localId":"z3","id":"Dl10"},{"name":"tile","parent":"tile","nodeType":"propertyRef","id":"Dk1"},{"name":"set","parent":"Sprite field","nodeType":"propertyRef","id":"Dk2"},{"op":"(","nodeType":"operator","id":"Dk3"},{"nodeType":"localRef","name":"new","localId":"z0","id":"Dl1"},{"op":")","nodeType":"operator","id":"Dk5"}],"tree":{"name":"set","parent":"Sprite field","nodeType":"call","args":[{"name":"tile","parent":"tile","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"z3","id":"Dl10"}],"id":"Dl0"},{"nodeType":"localRef","name":"new","localId":"z0","id":"Dl1"}],"id":"Dk"},"locals":[],"nodeType":"exprHolder","id":"Dj"},"nodeType":"exprStmt","id":"Di"},{"expr":{"tokens":[{"nodeType":"localRef","name":"new","localId":"z0","id":"Do0"},{"name":"set z index","parent":"Sprite","nodeType":"propertyRef","id":"Dn1"},{"op":"(","nodeType":"operator","id":"Dn2"},{"op":"-","nodeType":"operator","id":"Dn3"},{"op":"1","nodeType":"operator","id":"Dn4"},{"op":")","nodeType":"operator","id":"Dn5"}],"tree":{"name":"set z index","parent":"Sprite","nodeType":"call","args":[{"nodeType":"localRef","name":"new","localId":"z0","id":"Do0"},{"name":"-","parent":"Number","nodeType":"call","args":[{"nodeType":"numberLiteral","value":0,"id":"Do20"},{"nodeType":"numberLiteral","value":1,"id":"Do21"}],"id":"Do1"}],"id":"Dn"},"locals":[],"nodeType":"exprHolder","id":"Dm"},"nodeType":"exprStmt","id":"Dl"},{"expr":{"tokens":[{"nodeType":"localRef","name":"tw","localId":"z5","id":"Dr0"},{"op":":=","nodeType":"operator","id":"Dq1"},{"nodeType":"singletonRef","name":"data","type":"data","id":"Dr210"},{"name":"tile width","parent":"data","declId":"w","nodeType":"propertyRef","id":"Dq3"},{"op":"-","nodeType":"operator","id":"Dq4"},{"nodeType":"singletonRef","name":"data","type":"data","id":"Dr220"},{"name":"margin","parent":"data","declId":"E","nodeType":"propertyRef","id":"Dq6"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"tw","localId":"z5","id":"Dr0"},{"name":"-","parent":"Number","nodeType":"call","args":[{"name":"tile width","parent":"data","declId":"w","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"Dr210"}],"id":"Dr20"},{"name":"margin","parent":"data","declId":"E","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"Dr220"}],"id":"Dr21"}],"id":"Dr1"}],"id":"Dq"},"locals":[{"name":"tw","type":"Number","nodeType":"localDef","id":"z5"}],"nodeType":"exprHolder","id":"Dp"},"nodeType":"exprStmt","id":"Do"},{"expr":{"tokens":[{"nodeType":"localRef","name":"th","localId":"z6","id":"Du0"},{"op":":=","nodeType":"operator","id":"Dt1"},{"nodeType":"singletonRef","name":"data","type":"data","id":"Du210"},{"name":"tile height","parent":"data","declId":"x","nodeType":"propertyRef","id":"Dt3"},{"op":"-","nodeType":"operator","id":"Dt4"},{"nodeType":"singletonRef","name":"data","type":"data","id":"Du220"},{"name":"margin","parent":"data","declId":"E","nodeType":"propertyRef","id":"Dt6"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"th","localId":"z6","id":"Du0"},{"name":"-","parent":"Number","nodeType":"call","args":[{"name":"tile height","parent":"data","declId":"x","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"Du210"}],"id":"Du20"},{"name":"margin","parent":"data","declId":"E","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"Du220"}],"id":"Du21"}],"id":"Du1"}],"id":"Dt"},"locals":[{"name":"th","type":"Number","nodeType":"localDef","id":"z6"}],"nodeType":"exprHolder","id":"Ds"},"nodeType":"exprStmt","id":"Dr"},{"expr":{"tokens":[{"nodeType":"localRef","name":"new","localId":"z0","id":"Dx0"},{"name":"set width","parent":"Sprite","nodeType":"propertyRef","id":"Dw1"},{"op":"(","nodeType":"operator","id":"Dw2"},{"nodeType":"localRef","name":"tw","localId":"z5","id":"Dx1"},{"op":")","nodeType":"operator","id":"Dw4"}],"tree":{"name":"set width","parent":"Sprite","nodeType":"call","args":[{"nodeType":"localRef","name":"new","localId":"z0","id":"Dx0"},{"nodeType":"localRef","name":"tw","localId":"z5","id":"Dx1"}],"id":"Dw"},"locals":[],"nodeType":"exprHolder","id":"Dv"},"nodeType":"exprStmt","id":"Du"},{"expr":{"tokens":[{"nodeType":"localRef","name":"new","localId":"z0","id":"DA0"},{"name":"set height","parent":"Sprite","nodeType":"propertyRef","id":"Dz1"},{"op":"(","nodeType":"operator","id":"Dz2"},{"nodeType":"localRef","name":"th","localId":"z6","id":"DA1"},{"op":")","nodeType":"operator","id":"Dz4"}],"tree":{"name":"set height","parent":"Sprite","nodeType":"call","args":[{"nodeType":"localRef","name":"new","localId":"z0","id":"DA0"},{"nodeType":"localRef","name":"th","localId":"z6","id":"DA1"}],"id":"Dz"},"locals":[],"nodeType":"exprHolder","id":"Dy"},"nodeType":"exprStmt","id":"Dx"}],"id":"y"},{"nodeType":"record","name":"tile","comment":"","category":"index","isCloudEnabled":false,"keys":[{"nodeType":"recordKey","name":"row","type":"Number","id":"E10"},{"nodeType":"recordKey","name":"column","type":"Number","id":"E11"}],"fields":[{"nodeType":"recordField","name":"tile","type":"Sprite","id":"E20"}],"id":"D"},{"name":"margin","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"E"},{"name":"tile size","inParameters":[],"outParameters":[{"name":"width","type":"Number","nodeType":"localDef","id":"G0"},{"name":"height","type":"Number","nodeType":"localDef","id":"G1"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Gets the width and height of a tile","nodeType":"comment","id":"K0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"width","localId":"G0","id":"K40"},{"op":":=","nodeType":"operator","id":"K31"},{"nodeType":"singletonRef","name":"data","type":"data","id":"K420"},{"name":"tile width","parent":"data","declId":"w","nodeType":"propertyRef","id":"K33"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"width","localId":"G0","id":"K40"},{"name":"tile width","parent":"data","declId":"w","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"K420"}],"id":"K41"}],"id":"K3"},"locals":[],"nodeType":"exprHolder","id":"K2"},"nodeType":"exprStmt","id":"K1"},{"expr":{"tokens":[{"nodeType":"localRef","name":"height","localId":"G1","id":"K70"},{"op":":=","nodeType":"operator","id":"K61"},{"nodeType":"singletonRef","name":"data","type":"data","id":"K720"},{"name":"tile height","parent":"data","declId":"x","nodeType":"propertyRef","id":"K63"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"height","localId":"G1","id":"K70"},{"name":"tile height","parent":"data","declId":"x","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"K720"}],"id":"K71"}],"id":"K6"},"locals":[],"nodeType":"exprHolder","id":"K5"},"nodeType":"exprStmt","id":"K4"}],"id":"F"},{"name":"initialize square","inParameters":[{"name":"board","type":"Board","nodeType":"localDef","id":"L0"},{"name":"margin","type":"Number","nodeType":"localDef","id":"L1"},{"name":"rowsAndColumns","type":"Number","nodeType":"localDef","id":"L2"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Initializes a square board with square tiles","nodeType":"comment","id":"P0"},{"condition":{"tokens":[{"nodeType":"localRef","name":"rowsAndColumns","localId":"L2","id":"P40"},{"op":"≤","nodeType":"operator","id":"P31"},{"op":"0","nodeType":"operator","id":"P32"}],"tree":{"name":"≤","parent":"Number","nodeType":"call","args":[{"nodeType":"localRef","name":"rowsAndColumns","localId":"L2","id":"P40"},{"nodeType":"numberLiteral","value":0,"id":"P41"}],"id":"P3"},"locals":[],"nodeType":"exprHolder","id":"P2"},"thenBody":[{"expr":{"tokens":[{"nodeType":"localRef","name":"rowsAndColumns","localId":"L2","id":"P530"},{"op":":=","nodeType":"operator","id":"P521"},{"op":"5","nodeType":"operator","id":"P522"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"rowsAndColumns","localId":"L2","id":"P530"},{"nodeType":"numberLiteral","value":5,"id":"P531"}],"id":"P52"},"locals":[],"nodeType":"exprHolder","id":"P51"},"nodeType":"exprStmt","id":"P50"}],"elseBody":[{"expr":{"tokens":[],"tree":{"nodeType":"singletonRef","name":"$skip","type":"Unknown","id":"P62"},"locals":[],"nodeType":"exprHolder","id":"P61"},"nodeType":"exprStmt","id":"P60"}],"nodeType":"if","id":"P1"},{"expr":{"tokens":[{"nodeType":"localRef","name":"left","localId":"L3","id":"P90"},{"op":":=","nodeType":"operator","id":"P81"},{"nodeType":"localRef","name":"margin","localId":"L1","id":"P91"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"left","localId":"L3","id":"P90"},{"nodeType":"localRef","name":"margin","localId":"L1","id":"P91"}],"id":"P8"},"locals":[{"name":"left","type":"Number","nodeType":"localDef","id":"L3"}],"nodeType":"exprHolder","id":"P7"},"nodeType":"exprStmt","id":"P6"},{"expr":{"tokens":[{"nodeType":"localRef","name":"top","localId":"L4","id":"Pc0"},{"op":":=","nodeType":"operator","id":"Pb1"},{"nodeType":"localRef","name":"margin","localId":"L1","id":"Pc1"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"top","localId":"L4","id":"Pc0"},{"nodeType":"localRef","name":"margin","localId":"L1","id":"Pc1"}],"id":"Pb"},"locals":[{"name":"top","type":"Number","nodeType":"localDef","id":"L4"}],"nodeType":"exprHolder","id":"Pa"},"nodeType":"exprStmt","id":"P9"},{"expr":{"tokens":[{"nodeType":"localRef","name":"w","localId":"L5","id":"Pf0"},{"op":":=","nodeType":"operator","id":"Pe1"},{"nodeType":"localRef","name":"board","localId":"L0","id":"Pf210"},{"name":"width","parent":"Board","nodeType":"propertyRef","id":"Pe3"},{"op":"-","nodeType":"operator","id":"Pe4"},{"op":"2","nodeType":"operator","id":"Pe5"},{"op":"*","nodeType":"operator","id":"Pe6"},{"nodeType":"localRef","name":"margin","localId":"L1","id":"Pf221"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"w","localId":"L5","id":"Pf0"},{"name":"-","parent":"Number","nodeType":"call","args":[{"name":"width","parent":"Board","nodeType":"call","args":[{"nodeType":"localRef","name":"board","localId":"L0","id":"Pf210"}],"id":"Pf20"},{"name":"*","parent":"Number","nodeType":"call","args":[{"nodeType":"numberLiteral","value":2,"id":"Pf220"},{"nodeType":"localRef","name":"margin","localId":"L1","id":"Pf221"}],"id":"Pf21"}],"id":"Pf1"}],"id":"Pe"},"locals":[{"name":"w","type":"Number","nodeType":"localDef","id":"L5"}],"nodeType":"exprHolder","id":"Pd"},"nodeType":"exprStmt","id":"Pc"},{"expr":{"tokens":[{"nodeType":"localRef","name":"h","localId":"L6","id":"Pi0"},{"op":":=","nodeType":"operator","id":"Ph1"},{"nodeType":"localRef","name":"board","localId":"L0","id":"Pi210"},{"name":"height","parent":"Board","nodeType":"propertyRef","id":"Ph3"},{"op":"-","nodeType":"operator","id":"Ph4"},{"op":"2","nodeType":"operator","id":"Ph5"},{"op":"*","nodeType":"operator","id":"Ph6"},{"nodeType":"localRef","name":"margin","localId":"L1","id":"Pi221"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"h","localId":"L6","id":"Pi0"},{"name":"-","parent":"Number","nodeType":"call","args":[{"name":"height","parent":"Board","nodeType":"call","args":[{"nodeType":"localRef","name":"board","localId":"L0","id":"Pi210"}],"id":"Pi20"},{"name":"*","parent":"Number","nodeType":"call","args":[{"nodeType":"numberLiteral","value":2,"id":"Pi220"},{"nodeType":"localRef","name":"margin","localId":"L1","id":"Pi221"}],"id":"Pi21"}],"id":"Pi1"}],"id":"Ph"},"locals":[{"name":"h","type":"Number","nodeType":"localDef","id":"L6"}],"nodeType":"exprHolder","id":"Pg"},"nodeType":"exprStmt","id":"Pf"},{"condition":{"tokens":[{"nodeType":"localRef","name":"w","localId":"L5","id":"Pl0"},{"op":">","nodeType":"operator","id":"Pk1"},{"nodeType":"localRef","name":"h","localId":"L6","id":"Pl1"}],"tree":{"name":">","parent":"Number","nodeType":"call","args":[{"nodeType":"localRef","name":"w","localId":"L5","id":"Pl0"},{"nodeType":"localRef","name":"h","localId":"L6","id":"Pl1"}],"id":"Pk"},"locals":[],"nodeType":"exprHolder","id":"Pj"},"thenBody":[{"expr":{"tokens":[{"nodeType":"localRef","name":"w","localId":"L5","id":"Pm30"},{"op":":=","nodeType":"operator","id":"Pm21"},{"nodeType":"localRef","name":"h","localId":"L6","id":"Pm31"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"w","localId":"L5","id":"Pm30"},{"nodeType":"localRef","name":"h","localId":"L6","id":"Pm31"}],"id":"Pm2"},"locals":[],"nodeType":"exprHolder","id":"Pm1"},"nodeType":"exprStmt","id":"Pm0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"left","localId":"L3","id":"Pm60"},{"op":":=","nodeType":"operator","id":"Pm51"},{"op":"(","nodeType":"operator","id":"Pm52"},{"nodeType":"localRef","name":"board","localId":"L0","id":"Pm62110"},{"name":"width","parent":"Board","nodeType":"propertyRef","id":"Pm54"},{"op":"-","nodeType":"operator","id":"Pm55"},{"nodeType":"localRef","name":"w","localId":"L5","id":"Pm6211"},{"op":")","nodeType":"operator","id":"Pm57"},{"op":"/","nodeType":"operator","id":"Pm58"},{"op":"2","nodeType":"operator","id":"Pm59"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"left","localId":"L3","id":"Pm60"},{"name":"/","parent":"Number","nodeType":"call","args":[{"name":"-","parent":"Number","nodeType":"call","args":[{"name":"width","parent":"Board","nodeType":"call","args":[{"nodeType":"localRef","name":"board","localId":"L0","id":"Pm62110"}],"id":"Pm6210"},{"nodeType":"localRef","name":"w","localId":"L5","id":"Pm6211"}],"id":"Pm620"},{"nodeType":"numberLiteral","value":2,"id":"Pm621"}],"id":"Pm61"}],"id":"Pm5"},"locals":[],"nodeType":"exprHolder","id":"Pm4"},"nodeType":"exprStmt","id":"Pm3"}],"elseBody":[{"expr":{"tokens":[{"nodeType":"localRef","name":"h","localId":"L6","id":"Pn30"},{"op":":=","nodeType":"operator","id":"Pn21"},{"nodeType":"localRef","name":"w","localId":"L5","id":"Pn31"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"h","localId":"L6","id":"Pn30"},{"nodeType":"localRef","name":"w","localId":"L5","id":"Pn31"}],"id":"Pn2"},"locals":[],"nodeType":"exprHolder","id":"Pn1"},"nodeType":"exprStmt","id":"Pn0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"top","localId":"L4","id":"Pn60"},{"op":":=","nodeType":"operator","id":"Pn51"},{"op":"(","nodeType":"operator","id":"Pn52"},{"nodeType":"localRef","name":"board","localId":"L0","id":"Pn62110"},{"name":"height","parent":"Board","nodeType":"propertyRef","id":"Pn54"},{"op":"-","nodeType":"operator","id":"Pn55"},{"nodeType":"localRef","name":"h","localId":"L6","id":"Pn6211"},{"op":")","nodeType":"operator","id":"Pn57"},{"op":"/","nodeType":"operator","id":"Pn58"},{"op":"2","nodeType":"operator","id":"Pn59"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"top","localId":"L4","id":"Pn60"},{"name":"/","parent":"Number","nodeType":"call","args":[{"name":"-","parent":"Number","nodeType":"call","args":[{"name":"height","parent":"Board","nodeType":"call","args":[{"nodeType":"localRef","name":"board","localId":"L0","id":"Pn62110"}],"id":"Pn6210"},{"nodeType":"localRef","name":"h","localId":"L6","id":"Pn6211"}],"id":"Pn620"},{"nodeType":"numberLiteral","value":2,"id":"Pn621"}],"id":"Pn61"}],"id":"Pn5"},"locals":[],"nodeType":"exprHolder","id":"Pn4"},"nodeType":"exprStmt","id":"Pn3"}],"nodeType":"if","id":"Pi"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"Pq0"},{"name":"initialize","parent":"code","declId":"6","nodeType":"propertyRef","id":"Pp1"},{"op":"(","nodeType":"operator","id":"Pp2"},{"nodeType":"localRef","name":"board","localId":"L0","id":"Pq1"},{"op":",","nodeType":"operator","id":"Pp4"},{"nodeType":"localRef","name":"left","localId":"L3","id":"Pq2"},{"op":",","nodeType":"operator","id":"Pp6"},{"nodeType":"localRef","name":"top","localId":"L4","id":"Pq3"},{"op":",","nodeType":"operator","id":"Pp8"},{"nodeType":"localRef","name":"w","localId":"L5","id":"Pq4"},{"op":",","nodeType":"operator","id":"Ppa"},{"nodeType":"localRef","name":"h","localId":"L6","id":"Pq5"},{"op":",","nodeType":"operator","id":"Ppc"},{"nodeType":"localRef","name":"rowsAndColumns","localId":"L2","id":"Pq6"},{"op":",","nodeType":"operator","id":"Ppe"},{"nodeType":"localRef","name":"rowsAndColumns","localId":"L2","id":"Pq7"},{"op":")","nodeType":"operator","id":"Ppg"}],"tree":{"name":"initialize","parent":"code","declId":"6","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"Pq0"},{"nodeType":"localRef","name":"board","localId":"L0","id":"Pq1"},{"nodeType":"localRef","name":"left","localId":"L3","id":"Pq2"},{"nodeType":"localRef","name":"top","localId":"L4","id":"Pq3"},{"nodeType":"localRef","name":"w","localId":"L5","id":"Pq4"},{"nodeType":"localRef","name":"h","localId":"L6","id":"Pq5"},{"nodeType":"localRef","name":"rowsAndColumns","localId":"L2","id":"Pq6"},{"nodeType":"localRef","name":"rowsAndColumns","localId":"L2","id":"Pq7"}],"id":"Pp"},"locals":[],"nodeType":"exprHolder","id":"Po"},"nodeType":"exprStmt","id":"Pn"}],"id":"K"},{"name":"tiles","inParameters":[],"outParameters":[{"name":"ts","type":"Sprite Set","nodeType":"localDef","id":"Q0"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Gets the sprite set of tiles. Assign this set to a global variable to receive events on tiles.","nodeType":"comment","id":"U0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"ts","localId":"Q0","id":"U40"},{"op":":=","nodeType":"operator","id":"U31"},{"nodeType":"singletonRef","name":"data","type":"data","id":"U420"},{"name":"_tiles","parent":"data","declId":"v","nodeType":"propertyRef","id":"U33"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"ts","localId":"Q0","id":"U40"},{"name":"_tiles","parent":"data","declId":"v","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"U420"}],"id":"U41"}],"id":"U3"},"locals":[],"nodeType":"exprHolder","id":"U2"},"nodeType":"exprStmt","id":"U1"}],"id":"P"},{"name":"pieces","inParameters":[],"outParameters":[{"name":"ps","type":"Sprite Set","nodeType":"localDef","id":"V0"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Gets the sprite set of pieces. Assign this set to a global variable to receive events on pieces.","nodeType":"comment","id":"Z0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"ps","localId":"V0","id":"Z40"},{"op":":=","nodeType":"operator","id":"Z31"},{"nodeType":"singletonRef","name":"data","type":"data","id":"Z420"},{"name":"_pieces","parent":"data","declId":"h","nodeType":"propertyRef","id":"Z33"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"ps","localId":"V0","id":"Z40"},{"name":"_pieces","parent":"data","declId":"h","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"Z420"}],"id":"Z41"}],"id":"Z3"},"locals":[],"nodeType":"exprHolder","id":"Z2"},"nodeType":"exprStmt","id":"Z1"}],"id":"U"},{"name":"pieces at","inParameters":[{"name":"row","type":"Number","nodeType":"localDef","id":"62.0"},{"name":"column","type":"Number","nodeType":"localDef","id":"62.1"}],"outParameters":[{"name":"ps","type":"Sprite Set","nodeType":"localDef","id":"62.2"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Gets the pieces at a particular tile location.","nodeType":"comment","id":"66.0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"ps","localId":"62.2","id":"66.40"},{"op":":=","nodeType":"operator","id":"66.31"},{"nodeType":"singletonRef","name":"data","type":"data","id":"66.4210"},{"name":"board","parent":"data","declId":"t","nodeType":"propertyRef","id":"66.33"},{"name":"create sprite set","parent":"Board","nodeType":"propertyRef","id":"66.34"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"ps","localId":"62.2","id":"66.40"},{"name":"create sprite set","parent":"Board","nodeType":"call","args":[{"name":"board","parent":"data","declId":"t","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"66.4210"}],"id":"66.420"}],"id":"66.41"}],"id":"66.3"},"locals":[],"nodeType":"exprHolder","id":"66.2"},"nodeType":"exprStmt","id":"66.1"},{"iterator":{"name":"piece","type":"Sprite","nodeType":"localDef","id":"62.3"},"collection":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"66.70"},{"name":"_pieces","parent":"data","declId":"h","nodeType":"propertyRef","id":"66.61"}],"tree":{"name":"_pieces","parent":"data","declId":"h","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"66.70"}],"id":"66.6"},"locals":[],"nodeType":"exprHolder","id":"66.5"},"conditions":[{"condition":{"tokens":[{"nodeType":"booleanLiteral","value":true,"id":"66.82"}],"tree":{"nodeType":"booleanLiteral","value":true,"id":"66.82"},"locals":[],"nodeType":"exprHolder","id":"66.81"},"nodeType":"where","id":"66.80"}],"body":[{"expr":{"tokens":[{"nodeType":"localRef","name":"t","localId":"62.4","id":"66.930"},{"op":":=","nodeType":"operator","id":"66.921"},{"nodeType":"singletonRef","name":"records","type":"records","id":"66.93210"},{"name":"Sprite decorator","parent":"records","declId":"b","nodeType":"propertyRef","id":"66.923"},{"name":"at","parent":"Sprite decorator","nodeType":"propertyRef","id":"66.924"},{"op":"(","nodeType":"operator","id":"66.925"},{"nodeType":"localRef","name":"piece","localId":"62.3","id":"66.9321"},{"op":")","nodeType":"operator","id":"66.927"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"62.4","id":"66.930"},{"name":"at","parent":"Sprite decorator","nodeType":"call","args":[{"name":"Sprite decorator","parent":"records","declId":"b","nodeType":"call","args":[{"nodeType":"singletonRef","name":"records","type":"records","id":"66.93210"}],"id":"66.9320"},{"nodeType":"localRef","name":"piece","localId":"62.3","id":"66.9321"}],"id":"66.931"}],"id":"66.92"},"locals":[{"name":"t","type":"thing","nodeType":"localDef","id":"62.4"}],"nodeType":"exprHolder","id":"66.91"},"nodeType":"exprStmt","id":"66.90"},{"condition":{"tokens":[{"nodeType":"localRef","name":"t","localId":"62.4","id":"66.961110"},{"name":"row","parent":"thing","nodeType":"propertyRef","id":"66.951"},{"name":"get","parent":"Number field","nodeType":"propertyRef","id":"66.952"},{"op":"=","nodeType":"operator","id":"66.953"},{"nodeType":"localRef","name":"row","localId":"62.0","id":"66.9611"},{"op":"and","nodeType":"operator","id":"66.955"},{"nodeType":"localRef","name":"t","localId":"62.4","id":"66.962110"},{"name":"column","parent":"thing","nodeType":"propertyRef","id":"66.957"},{"name":"get","parent":"Number field","nodeType":"propertyRef","id":"66.958"},{"op":"=","nodeType":"operator","id":"66.959"},{"nodeType":"localRef","name":"column","localId":"62.1","id":"66.9621"}],"tree":{"name":"and","parent":"Boolean","nodeType":"call","args":[{"name":"=","parent":"Number","nodeType":"call","args":[{"name":"get","parent":"Number field","nodeType":"call","args":[{"name":"row","parent":"thing","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"62.4","id":"66.961110"}],"id":"66.96110"}],"id":"66.9610"},{"nodeType":"localRef","name":"row","localId":"62.0","id":"66.9611"}],"id":"66.960"},{"name":"=","parent":"Number","nodeType":"call","args":[{"name":"get","parent":"Number field","nodeType":"call","args":[{"name":"column","parent":"thing","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"62.4","id":"66.962110"}],"id":"66.96210"}],"id":"66.9620"},{"nodeType":"localRef","name":"column","localId":"62.1","id":"66.9621"}],"id":"66.961"}],"id":"66.95"},"locals":[],"nodeType":"exprHolder","id":"66.94"},"thenBody":[{"expr":{"tokens":[{"nodeType":"localRef","name":"ps","localId":"62.2","id":"66.9730"},{"name":"add","parent":"Sprite Set","nodeType":"propertyRef","id":"66.9721"},{"op":"(","nodeType":"operator","id":"66.9722"},{"nodeType":"localRef","name":"piece","localId":"62.3","id":"66.9731"},{"op":")","nodeType":"operator","id":"66.9724"}],"tree":{"name":"add","parent":"Sprite Set","nodeType":"call","args":[{"nodeType":"localRef","name":"ps","localId":"62.2","id":"66.9730"},{"nodeType":"localRef","name":"piece","localId":"62.3","id":"66.9731"}],"id":"66.972"},"locals":[],"nodeType":"exprHolder","id":"66.971"},"nodeType":"exprStmt","id":"66.970"}],"elseBody":[{"expr":{"tokens":[],"tree":{"nodeType":"singletonRef","name":"$skip","type":"Unknown","id":"66.982"},"locals":[],"nodeType":"exprHolder","id":"66.981"},"nodeType":"exprStmt","id":"66.980"}],"nodeType":"if","id":"66.93"}],"nodeType":"foreach","id":"66.4"}],"id":"Z"},{"name":"pieces on","inParameters":[{"name":"tile","type":"Sprite","nodeType":"localDef","id":"67.0"}],"outParameters":[{"name":"ps","type":"Sprite Set","nodeType":"localDef","id":"67.1"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Gets the pieces positioned on a particular tile.","nodeType":"comment","id":"71.0"},{"condition":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"71.410"},{"name":"_tiles","parent":"data","declId":"v","nodeType":"propertyRef","id":"71.31"},{"name":"contains","parent":"Sprite Set","nodeType":"propertyRef","id":"71.32"},{"op":"(","nodeType":"operator","id":"71.33"},{"nodeType":"localRef","name":"tile","localId":"67.0","id":"71.41"},{"op":")","nodeType":"operator","id":"71.35"}],"tree":{"name":"contains","parent":"Sprite Set","nodeType":"call","args":[{"name":"_tiles","parent":"data","declId":"v","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"71.410"}],"id":"71.40"},{"nodeType":"localRef","name":"tile","localId":"67.0","id":"71.41"}],"id":"71.3"},"locals":[],"nodeType":"exprHolder","id":"71.2"},"thenBody":[{"expr":{"tokens":[{"nodeType":"localRef","name":"t1","localId":"67.2","id":"71.530"},{"op":":=","nodeType":"operator","id":"71.521"},{"nodeType":"singletonRef","name":"records","type":"records","id":"71.53210"},{"name":"Sprite decorator","parent":"records","declId":"b","nodeType":"propertyRef","id":"71.523"},{"name":"at","parent":"Sprite decorator","nodeType":"propertyRef","id":"71.524"},{"op":"(","nodeType":"operator","id":"71.525"},{"nodeType":"localRef","name":"tile","localId":"67.0","id":"71.5321"},{"op":")","nodeType":"operator","id":"71.527"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"t1","localId":"67.2","id":"71.530"},{"name":"at","parent":"Sprite decorator","nodeType":"call","args":[{"name":"Sprite decorator","parent":"records","declId":"b","nodeType":"call","args":[{"nodeType":"singletonRef","name":"records","type":"records","id":"71.53210"}],"id":"71.5320"},{"nodeType":"localRef","name":"tile","localId":"67.0","id":"71.5321"}],"id":"71.531"}],"id":"71.52"},"locals":[{"name":"t1","type":"thing","nodeType":"localDef","id":"67.2"}],"nodeType":"exprHolder","id":"71.51"},"nodeType":"exprStmt","id":"71.50"},{"expr":{"tokens":[{"nodeType":"localRef","name":"ps","localId":"67.1","id":"71.560"},{"op":":=","nodeType":"operator","id":"71.551"},{"nodeType":"singletonRef","name":"code","type":"code","id":"71.5620"},{"name":"pieces at","parent":"code","declId":"Z","nodeType":"propertyRef","id":"71.553"},{"op":"(","nodeType":"operator","id":"71.554"},{"nodeType":"localRef","name":"t1","localId":"67.2","id":"71.562210"},{"name":"row","parent":"thing","nodeType":"propertyRef","id":"71.556"},{"name":"get","parent":"Number field","nodeType":"propertyRef","id":"71.557"},{"op":",","nodeType":"operator","id":"71.558"},{"nodeType":"localRef","name":"t1","localId":"67.2","id":"71.562310"},{"name":"column","parent":"thing","nodeType":"propertyRef","id":"71.55a"},{"name":"get","parent":"Number field","nodeType":"propertyRef","id":"71.55b"},{"op":")","nodeType":"operator","id":"71.55c"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"ps","localId":"67.1","id":"71.560"},{"name":"pieces at","parent":"code","declId":"Z","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"71.5620"},{"name":"get","parent":"Number field","nodeType":"call","args":[{"name":"row","parent":"thing","nodeType":"call","args":[{"nodeType":"localRef","name":"t1","localId":"67.2","id":"71.562210"}],"id":"71.56220"}],"id":"71.5621"},{"name":"get","parent":"Number field","nodeType":"call","args":[{"name":"column","parent":"thing","nodeType":"call","args":[{"nodeType":"localRef","name":"t1","localId":"67.2","id":"71.562310"}],"id":"71.56230"}],"id":"71.5622"}],"id":"71.561"}],"id":"71.55"},"locals":[],"nodeType":"exprHolder","id":"71.54"},"nodeType":"exprStmt","id":"71.53"}],"elseBody":[{"expr":{"tokens":[{"nodeType":"localRef","name":"ps","localId":"67.1","id":"71.630"},{"op":":=","nodeType":"operator","id":"71.621"},{"nodeType":"singletonRef","name":"data","type":"data","id":"71.63210"},{"name":"board","parent":"data","declId":"t","nodeType":"propertyRef","id":"71.623"},{"name":"create sprite set","parent":"Board","nodeType":"propertyRef","id":"71.624"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"ps","localId":"67.1","id":"71.630"},{"name":"create sprite set","parent":"Board","nodeType":"call","args":[{"name":"board","parent":"data","declId":"t","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"71.63210"}],"id":"71.6320"}],"id":"71.631"}],"id":"71.62"},"locals":[],"nodeType":"exprHolder","id":"71.61"},"nodeType":"exprStmt","id":"71.60"}],"nodeType":"if","id":"71.1"}],"id":"66."},{"name":"position","inParameters":[{"name":"tile or piece","type":"Sprite","nodeType":"localDef","id":"72.0"}],"outParameters":[{"name":"row","type":"Number","nodeType":"localDef","id":"72.1"},{"name":"column","type":"Number","nodeType":"localDef","id":"72.2"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Gets the row and column index of a tile or a piece. Returns -1, -1 if not on board.","nodeType":"comment","id":"76.0"},{"condition":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"76.4110"},{"name":"_tiles","parent":"data","declId":"v","nodeType":"propertyRef","id":"76.31"},{"name":"contains","parent":"Sprite Set","nodeType":"propertyRef","id":"76.32"},{"op":"(","nodeType":"operator","id":"76.33"},{"nodeType":"localRef","name":"tile or piece","localId":"72.0","id":"76.411"},{"op":")","nodeType":"operator","id":"76.35"},{"op":"or","nodeType":"operator","id":"76.36"},{"nodeType":"singletonRef","name":"data","type":"data","id":"76.4210"},{"name":"_pieces","parent":"data","declId":"h","nodeType":"propertyRef","id":"76.38"},{"name":"contains","parent":"Sprite Set","nodeType":"propertyRef","id":"76.39"},{"op":"(","nodeType":"operator","id":"76.3a"},{"nodeType":"localRef","name":"tile or piece","localId":"72.0","id":"76.421"},{"op":")","nodeType":"operator","id":"76.3c"}],"tree":{"name":"or","parent":"Boolean","nodeType":"call","args":[{"name":"contains","parent":"Sprite Set","nodeType":"call","args":[{"name":"_tiles","parent":"data","declId":"v","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"76.4110"}],"id":"76.410"},{"nodeType":"localRef","name":"tile or piece","localId":"72.0","id":"76.411"}],"id":"76.40"},{"name":"contains","parent":"Sprite Set","nodeType":"call","args":[{"name":"_pieces","parent":"data","declId":"h","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"76.4210"}],"id":"76.420"},{"nodeType":"localRef","name":"tile or piece","localId":"72.0","id":"76.421"}],"id":"76.41"}],"id":"76.3"},"locals":[],"nodeType":"exprHolder","id":"76.2"},"thenBody":[{"expr":{"tokens":[{"nodeType":"localRef","name":"t","localId":"72.3","id":"76.530"},{"op":":=","nodeType":"operator","id":"76.521"},{"nodeType":"singletonRef","name":"records","type":"records","id":"76.53210"},{"name":"Sprite decorator","parent":"records","declId":"b","nodeType":"propertyRef","id":"76.523"},{"name":"at","parent":"Sprite decorator","nodeType":"propertyRef","id":"76.524"},{"op":"(","nodeType":"operator","id":"76.525"},{"nodeType":"localRef","name":"tile or piece","localId":"72.0","id":"76.5321"},{"op":")","nodeType":"operator","id":"76.527"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"72.3","id":"76.530"},{"name":"at","parent":"Sprite decorator","nodeType":"call","args":[{"name":"Sprite decorator","parent":"records","declId":"b","nodeType":"call","args":[{"nodeType":"singletonRef","name":"records","type":"records","id":"76.53210"}],"id":"76.5320"},{"nodeType":"localRef","name":"tile or piece","localId":"72.0","id":"76.5321"}],"id":"76.531"}],"id":"76.52"},"locals":[{"name":"t","type":"thing","nodeType":"localDef","id":"72.3"}],"nodeType":"exprHolder","id":"76.51"},"nodeType":"exprStmt","id":"76.50"},{"expr":{"tokens":[{"nodeType":"localRef","name":"row","localId":"72.1","id":"76.560"},{"op":":=","nodeType":"operator","id":"76.551"},{"nodeType":"localRef","name":"t","localId":"72.3","id":"76.56210"},{"name":"row","parent":"thing","nodeType":"propertyRef","id":"76.553"},{"name":"get","parent":"Number field","nodeType":"propertyRef","id":"76.554"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"row","localId":"72.1","id":"76.560"},{"name":"get","parent":"Number field","nodeType":"call","args":[{"name":"row","parent":"thing","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"72.3","id":"76.56210"}],"id":"76.5620"}],"id":"76.561"}],"id":"76.55"},"locals":[],"nodeType":"exprHolder","id":"76.54"},"nodeType":"exprStmt","id":"76.53"},{"expr":{"tokens":[{"nodeType":"localRef","name":"column","localId":"72.2","id":"76.590"},{"op":":=","nodeType":"operator","id":"76.581"},{"nodeType":"localRef","name":"t","localId":"72.3","id":"76.59210"},{"name":"column","parent":"thing","nodeType":"propertyRef","id":"76.583"},{"name":"get","parent":"Number field","nodeType":"propertyRef","id":"76.584"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"column","localId":"72.2","id":"76.590"},{"name":"get","parent":"Number field","nodeType":"call","args":[{"name":"column","parent":"thing","nodeType":"call","args":[{"nodeType":"localRef","name":"t","localId":"72.3","id":"76.59210"}],"id":"76.5920"}],"id":"76.591"}],"id":"76.58"},"locals":[],"nodeType":"exprHolder","id":"76.57"},"nodeType":"exprStmt","id":"76.56"}],"elseBody":[{"expr":{"tokens":[{"nodeType":"localRef","name":"row","localId":"72.1","id":"76.630"},{"op":":=","nodeType":"operator","id":"76.621"},{"op":"-","nodeType":"operator","id":"76.622"},{"op":"1","nodeType":"operator","id":"76.623"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"row","localId":"72.1","id":"76.630"},{"name":"-","parent":"Number","nodeType":"call","args":[{"nodeType":"numberLiteral","value":0,"id":"76.6320"},{"nodeType":"numberLiteral","value":1,"id":"76.6321"}],"id":"76.631"}],"id":"76.62"},"locals":[],"nodeType":"exprHolder","id":"76.61"},"nodeType":"exprStmt","id":"76.60"},{"expr":{"tokens":[{"nodeType":"localRef","name":"column","localId":"72.2","id":"76.660"},{"op":":=","nodeType":"operator","id":"76.651"},{"op":"-","nodeType":"operator","id":"76.652"},{"op":"1","nodeType":"operator","id":"76.653"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"column","localId":"72.2","id":"76.660"},{"name":"-","parent":"Number","nodeType":"call","args":[{"nodeType":"numberLiteral","value":0,"id":"76.6620"},{"nodeType":"numberLiteral","value":1,"id":"76.6621"}],"id":"76.661"}],"id":"76.65"},"locals":[],"nodeType":"exprHolder","id":"76.64"},"nodeType":"exprStmt","id":"76.63"}],"nodeType":"if","id":"76.1"}],"id":"71."},{"name":"move duration","comment":"","type":"Number","isReadonly":false,"nodeType":"data","id":"76."},{"name":"set move duration","inParameters":[{"name":"seconds","type":"Number","nodeType":"localDef","id":"78.0"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Sets the duration of a single piece move.","nodeType":"comment","id":"82.0"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"data","type":"data","id":"82.410"},{"name":"move duration","parent":"data","declId":"76.","nodeType":"propertyRef","id":"82.31"},{"op":":=","nodeType":"operator","id":"82.32"},{"nodeType":"singletonRef","name":"math","type":"Math","id":"82.420"},{"name":"max","parent":"Math","nodeType":"propertyRef","id":"82.34"},{"op":"(","nodeType":"operator","id":"82.35"},{"op":"0","nodeType":"operator","id":"82.36"},{"op":",","nodeType":"operator","id":"82.37"},{"nodeType":"localRef","name":"seconds","localId":"78.0","id":"82.422"},{"op":")","nodeType":"operator","id":"82.39"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"name":"move duration","parent":"data","declId":"76.","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"82.410"}],"id":"82.40"},{"name":"max","parent":"Math","nodeType":"call","args":[{"nodeType":"singletonRef","name":"math","type":"Math","id":"82.420"},{"nodeType":"numberLiteral","value":0,"id":"82.421"},{"nodeType":"localRef","name":"seconds","localId":"78.0","id":"82.422"}],"id":"82.41"}],"id":"82.3"},"locals":[],"nodeType":"exprHolder","id":"82.2"},"nodeType":"exprStmt","id":"82.1"}],"id":"77."},{"nodeType":"library","name":"animations","libIdentifier":"igeg","libIsPublished":true,"exportedTypes":[],"exportedActions":[{"name":"example","inParameters":[],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"82.","id":"84.0"},{"name":"fade in","inParameters":[{"name":"sprite","type":"Sprite","nodeType":"localDef","id":"84.60"},{"name":"seconds","type":"Number","nodeType":"localDef","id":"84.61"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"82.","id":"84.5"},{"name":"evolve","inParameters":[],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"82.","id":"84.a"},{"name":"initialize","inParameters":[{"name":"board","type":"Board","nodeType":"localDef","id":"84.g0"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"82.","id":"84.f"},{"name":"fade out","inParameters":[{"name":"sprite","type":"Sprite","nodeType":"localDef","id":"84.l0"},{"name":"seconds","type":"Number","nodeType":"localDef","id":"84.l1"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"82.","id":"84.k"},{"name":"flush","inParameters":[{"name":"evolve board","type":"Boolean","nodeType":"localDef","id":"84.q0"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"82.","id":"84.p"},{"name":"move to","inParameters":[{"name":"sprite","type":"Sprite","nodeType":"localDef","id":"84.v0"},{"name":"x","type":"Number","nodeType":"localDef","id":"84.v1"},{"name":"y","type":"Number","nodeType":"localDef","id":"84.v2"},{"name":"seconds","type":"Number","nodeType":"localDef","id":"84.v3"}],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"82.","id":"84.u"}],"resolveClauses":[{"name":"easing","defaultLibId":"84.","withTypes":[],"withActions":[{"name":"quadratic","isExplicit":false,"actionId":"86.0","nodeType":"actionBinding","id":"83.130"},{"name":"quadratic in out","isExplicit":false,"actionId":"86.a","nodeType":"actionBinding","id":"83.131"},{"name":"quadratic out","isExplicit":false,"actionId":"86.5","nodeType":"actionBinding","id":"83.132"}],"nodeType":"resolveClause","id":"83.10"}],"id":"82."},{"nodeType":"library","name":"easing","libIdentifier":"fxjo","libIsPublished":true,"exportedTypes":[],"exportedActions":[{"name":"quadratic","inParameters":[{"name":"t","type":"Number","nodeType":"localDef","id":"86.10"}],"outParameters":[{"name":"r","type":"Number","nodeType":"localDef","id":"86.11"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"84.","id":"86.0"},{"name":"quadratic out","inParameters":[{"name":"t","type":"Number","nodeType":"localDef","id":"86.60"}],"outParameters":[{"name":"r","type":"Number","nodeType":"localDef","id":"86.61"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"84.","id":"86.5"},{"name":"quadratic in out","inParameters":[{"name":"t","type":"Number","nodeType":"localDef","id":"86.b0"}],"outParameters":[{"name":"r","type":"Number","nodeType":"localDef","id":"86.b1"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"84.","id":"86.a"},{"name":"sine","inParameters":[{"name":"t","type":"Number","nodeType":"localDef","id":"86.g0"}],"outParameters":[{"name":"r","type":"Number","nodeType":"localDef","id":"86.g1"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"84.","id":"86.f"},{"name":"sine out","inParameters":[{"name":"t","type":"Number","nodeType":"localDef","id":"86.l0"}],"outParameters":[{"name":"r","type":"Number","nodeType":"localDef","id":"86.l1"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"84.","id":"86.k"},{"name":"sine in out","inParameters":[{"name":"t","type":"Number","nodeType":"localDef","id":"86.q0"}],"outParameters":[{"name":"r","type":"Number","nodeType":"localDef","id":"86.q1"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"84.","id":"86.p"},{"name":"example all","inParameters":[],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"84.","id":"86.u"},{"name":"example","inParameters":[],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"libAction","parentLibId":"84.","id":"86.z"}],"resolveClauses":[],"id":"84."},{"name":"size","inParameters":[],"outParameters":[{"name":"rows","type":"Number","nodeType":"localDef","id":"87.0"},{"name":"columns","type":"Number","nodeType":"localDef","id":"87.1"}],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Gets the number of rows and columns","nodeType":"comment","id":"91.0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"rows","localId":"87.0","id":"91.40"},{"op":":=","nodeType":"operator","id":"91.31"},{"nodeType":"singletonRef","name":"data","type":"data","id":"91.420"},{"name":"rows","parent":"data","declId":"r","nodeType":"propertyRef","id":"91.33"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"rows","localId":"87.0","id":"91.40"},{"name":"rows","parent":"data","declId":"r","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"91.420"}],"id":"91.41"}],"id":"91.3"},"locals":[],"nodeType":"exprHolder","id":"91.2"},"nodeType":"exprStmt","id":"91.1"},{"expr":{"tokens":[{"nodeType":"localRef","name":"columns","localId":"87.1","id":"91.70"},{"op":":=","nodeType":"operator","id":"91.61"},{"nodeType":"singletonRef","name":"data","type":"data","id":"91.720"},{"name":"columns","parent":"data","declId":"s","nodeType":"propertyRef","id":"91.63"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"columns","localId":"87.1","id":"91.70"},{"name":"columns","parent":"data","declId":"s","nodeType":"call","args":[{"nodeType":"singletonRef","name":"data","type":"data","id":"91.720"}],"id":"91.71"}],"id":"91.6"},"locals":[],"nodeType":"exprHolder","id":"91.5"},"nodeType":"exprStmt","id":"91.4"}],"id":"86."}],"nodeType":"app","id":"0"}

{"textVersion":"v2.2,js,ctx","jsonVersion":"v0.0,resolved","name":"Is it up?","comment":"A first attempt at handling json data. Queries isitup.org json API checking if a website is working or not and return its IP address if it is.","icon":"wifi","color":"#ff007fff","autoIcon":"wifi","autoColor":"#007fff","platform":"current","showAd":false,"isLibrary":false,"allowExport":false,"decls":[{"name":"isitup","inParameters":[],"outParameters":[],"isPrivate":true,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Utilize isitup.org json API to check sites are working.","nodeType":"comment","id":"60"},{"text":"A first attempt at handling json data.","nodeType":"comment","id":"61"},{"text":"","nodeType":"comment","id":"62"},{"text":"Site to check.","nodeType":"comment","id":"63"},{"expr":{"tokens":[{"nodeType":"localRef","name":"site","localId":"20","id":"670"},{"op":":=","nodeType":"operator","id":"661"},{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6720"},{"name":"ask string","parent":"Wall","nodeType":"propertyRef","id":"663"},{"op":"(","nodeType":"operator","id":"664"},{"nodeType":"stringLiteral","value":"Site to check.","id":"6721"},{"op":")","nodeType":"operator","id":"666"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"site","localId":"20","id":"670"},{"name":"ask string","parent":"Wall","nodeType":"call","args":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6720"},{"nodeType":"stringLiteral","value":"Site to check.","id":"6721"}],"id":"671"}],"id":"66"},"locals":[{"name":"site","type":"String","nodeType":"localDef","id":"20"}],"nodeType":"exprHolder","id":"65"},"nodeType":"exprStmt","id":"64"},{"text":"","nodeType":"comment","id":"67"},{"text":"Build the query url.","nodeType":"comment","id":"68"},{"expr":{"tokens":[{"nodeType":"localRef","name":"url","localId":"21","id":"6c0"},{"op":":=","nodeType":"operator","id":"6b1"},{"nodeType":"stringLiteral","value":"http://isitup.org/","id":"6c210"},{"op":"∥","nodeType":"operator","id":"6b3"},{"nodeType":"singletonRef","name":"web","type":"Web","id":"6c2120"},{"name":"url encode","parent":"Web","nodeType":"propertyRef","id":"6b5"},{"op":"(","nodeType":"operator","id":"6b6"},{"nodeType":"localRef","name":"site","localId":"20","id":"6c2121"},{"op":")","nodeType":"operator","id":"6b8"},{"op":"∥","nodeType":"operator","id":"6b9"},{"nodeType":"stringLiteral","value":".json","id":"6c21"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"url","localId":"21","id":"6c0"},{"name":"∥","parent":"String","nodeType":"call","args":[{"name":"∥","parent":"String","nodeType":"call","args":[{"nodeType":"stringLiteral","value":"http://isitup.org/","id":"6c210"},{"name":"url encode","parent":"Web","nodeType":"call","args":[{"nodeType":"singletonRef","name":"web","type":"Web","id":"6c2120"},{"nodeType":"localRef","name":"site","localId":"20","id":"6c2121"}],"id":"6c211"}],"id":"6c20"},{"nodeType":"stringLiteral","value":".json","id":"6c21"}],"id":"6c1"}],"id":"6b"},"locals":[{"name":"url","type":"String","nodeType":"localDef","id":"21"}],"nodeType":"exprHolder","id":"6a"},"nodeType":"exprStmt","id":"69"},{"text":"","nodeType":"comment","id":"6c"},{"text":"Download the result and parse it into a json data structure","nodeType":"comment","id":"6d"},{"expr":{"tokens":[{"nodeType":"localRef","name":"json","localId":"22","id":"6h0"},{"op":":=","nodeType":"operator","id":"6g1"},{"nodeType":"singletonRef","name":"web","type":"Web","id":"6h20"},{"name":"json","parent":"Web","nodeType":"propertyRef","id":"6g3"},{"op":"(","nodeType":"operator","id":"6g4"},{"nodeType":"singletonRef","name":"web","type":"Web","id":"6h220"},{"name":"download","parent":"Web","nodeType":"propertyRef","id":"6g6"},{"op":"(","nodeType":"operator","id":"6g7"},{"nodeType":"localRef","name":"url","localId":"21","id":"6h221"},{"op":")","nodeType":"operator","id":"6g9"},{"op":")","nodeType":"operator","id":"6ga"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"json","localId":"22","id":"6h0"},{"name":"json","parent":"Web","nodeType":"call","args":[{"nodeType":"singletonRef","name":"web","type":"Web","id":"6h20"},{"name":"download","parent":"Web","nodeType":"call","args":[{"nodeType":"singletonRef","name":"web","type":"Web","id":"6h220"},{"nodeType":"localRef","name":"url","localId":"21","id":"6h221"}],"id":"6h21"}],"id":"6h1"}],"id":"6g"},"locals":[{"name":"json","type":"Json Object","nodeType":"localDef","id":"22"}],"nodeType":"exprHolder","id":"6f"},"nodeType":"exprStmt","id":"6e"},{"text":"","nodeType":"comment","id":"6h"},{"text":"Fetch required fields from the json object.","nodeType":"comment","id":"6i"},{"expr":{"tokens":[{"nodeType":"localRef","name":"sc","localId":"23","id":"6m0"},{"op":":=","nodeType":"operator","id":"6l1"},{"nodeType":"localRef","name":"json","localId":"22","id":"6m210"},{"name":"field","parent":"Json Object","nodeType":"propertyRef","id":"6l3"},{"op":"(","nodeType":"operator","id":"6l4"},{"nodeType":"stringLiteral","value":"status_code","id":"6m211"},{"op":")","nodeType":"operator","id":"6l6"},{"name":"to number","parent":"Json Object","nodeType":"propertyRef","id":"6l7"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"sc","localId":"23","id":"6m0"},{"name":"to number","parent":"Json Object","nodeType":"call","args":[{"name":"field","parent":"Json Object","nodeType":"call","args":[{"nodeType":"localRef","name":"json","localId":"22","id":"6m210"},{"nodeType":"stringLiteral","value":"status_code","id":"6m211"}],"id":"6m20"}],"id":"6m1"}],"id":"6l"},"locals":[{"name":"sc","type":"Number","nodeType":"localDef","id":"23"}],"nodeType":"exprHolder","id":"6k"},"nodeType":"exprStmt","id":"6j"},{"expr":{"tokens":[{"nodeType":"localRef","name":"dom","localId":"24","id":"6p0"},{"op":":=","nodeType":"operator","id":"6o1"},{"nodeType":"localRef","name":"json","localId":"22","id":"6p210"},{"name":"field","parent":"Json Object","nodeType":"propertyRef","id":"6o3"},{"op":"(","nodeType":"operator","id":"6o4"},{"nodeType":"stringLiteral","value":"domain","id":"6p211"},{"op":")","nodeType":"operator","id":"6o6"},{"name":"to string","parent":"Json Object","nodeType":"propertyRef","id":"6o7"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"dom","localId":"24","id":"6p0"},{"name":"to string","parent":"Json Object","nodeType":"call","args":[{"name":"field","parent":"Json Object","nodeType":"call","args":[{"nodeType":"localRef","name":"json","localId":"22","id":"6p210"},{"nodeType":"stringLiteral","value":"domain","id":"6p211"}],"id":"6p20"}],"id":"6p1"}],"id":"6o"},"locals":[{"name":"dom","type":"String","nodeType":"localDef","id":"24"}],"nodeType":"exprHolder","id":"6n"},"nodeType":"exprStmt","id":"6m"},{"condition":{"tokens":[{"nodeType":"localRef","name":"sc","localId":"23","id":"6s0"},{"op":"=","nodeType":"operator","id":"6r1"},{"op":"1","nodeType":"operator","id":"6r2"}],"tree":{"name":"=","parent":"Number","nodeType":"call","args":[{"nodeType":"localRef","name":"sc","localId":"23","id":"6s0"},{"nodeType":"numberLiteral","value":1,"id":"6s1"}],"id":"6r"},"locals":[],"nodeType":"exprHolder","id":"6q"},"thenBody":[{"text":"If site is up then display some info.","nodeType":"comment","id":"6t0"},{"expr":{"tokens":[{"nodeType":"localRef","name":"ip","localId":"25","id":"6t40"},{"op":":=","nodeType":"operator","id":"6t31"},{"nodeType":"localRef","name":"json","localId":"22","id":"6t4210"},{"name":"field","parent":"Json Object","nodeType":"propertyRef","id":"6t33"},{"op":"(","nodeType":"operator","id":"6t34"},{"nodeType":"stringLiteral","value":"response_ip","id":"6t4211"},{"op":")","nodeType":"operator","id":"6t36"},{"name":"to string","parent":"Json Object","nodeType":"propertyRef","id":"6t37"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"ip","localId":"25","id":"6t40"},{"name":"to string","parent":"Json Object","nodeType":"call","args":[{"name":"field","parent":"Json Object","nodeType":"call","args":[{"nodeType":"localRef","name":"json","localId":"22","id":"6t4210"},{"nodeType":"stringLiteral","value":"response_ip","id":"6t4211"}],"id":"6t420"}],"id":"6t41"}],"id":"6t3"},"locals":[{"name":"ip","type":"String","nodeType":"localDef","id":"25"}],"nodeType":"exprHolder","id":"6t2"},"nodeType":"exprStmt","id":"6t1"},{"expr":{"tokens":[{"nodeType":"localRef","name":"rc","localId":"26","id":"6t70"},{"op":":=","nodeType":"operator","id":"6t61"},{"nodeType":"localRef","name":"json","localId":"22","id":"6t7210"},{"name":"field","parent":"Json Object","nodeType":"propertyRef","id":"6t63"},{"op":"(","nodeType":"operator","id":"6t64"},{"nodeType":"stringLiteral","value":"response_code","id":"6t7211"},{"op":")","nodeType":"operator","id":"6t66"},{"name":"to string","parent":"Json Object","nodeType":"propertyRef","id":"6t67"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"rc","localId":"26","id":"6t70"},{"name":"to string","parent":"Json Object","nodeType":"call","args":[{"name":"field","parent":"Json Object","nodeType":"call","args":[{"nodeType":"localRef","name":"json","localId":"22","id":"6t7210"},{"nodeType":"stringLiteral","value":"response_code","id":"6t7211"}],"id":"6t720"}],"id":"6t71"}],"id":"6t6"},"locals":[{"name":"rc","type":"String","nodeType":"localDef","id":"26"}],"nodeType":"exprHolder","id":"6t5"},"nodeType":"exprStmt","id":"6t4"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6ta0"},{"name":"prompt","parent":"Wall","nodeType":"propertyRef","id":"6t91"},{"op":"(","nodeType":"operator","id":"6t92"},{"nodeType":"localRef","name":"dom","localId":"24","id":"6ta21110"},{"op":"∥","nodeType":"operator","id":"6t94"},{"nodeType":"stringLiteral","value":" (IP: ","id":"6ta21111"},{"op":"∥","nodeType":"operator","id":"6t96"},{"nodeType":"localRef","name":"ip","localId":"25","id":"6ta2111"},{"op":"∥","nodeType":"operator","id":"6t98"},{"nodeType":"stringLiteral","value":")","id":"6ta211"},{"op":"∥","nodeType":"operator","id":"6t9a"},{"nodeType":"stringLiteral","value":"\nIs working.","id":"6ta21"},{"op":")","nodeType":"operator","id":"6t9c"}],"tree":{"name":"prompt","parent":"Wall","nodeType":"call","args":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6ta0"},{"name":"∥","parent":"String","nodeType":"call","args":[{"name":"∥","parent":"String","nodeType":"call","args":[{"name":"∥","parent":"String","nodeType":"call","args":[{"name":"∥","parent":"String","nodeType":"call","args":[{"nodeType":"localRef","name":"dom","localId":"24","id":"6ta21110"},{"nodeType":"stringLiteral","value":" (IP: ","id":"6ta21111"}],"id":"6ta2110"},{"nodeType":"localRef","name":"ip","localId":"25","id":"6ta2111"}],"id":"6ta210"},{"nodeType":"stringLiteral","value":")","id":"6ta211"}],"id":"6ta20"},{"nodeType":"stringLiteral","value":"\nIs working.","id":"6ta21"}],"id":"6ta1"}],"id":"6t9"},"locals":[],"nodeType":"exprHolder","id":"6t8"},"nodeType":"exprStmt","id":"6t7"}],"elseBody":[{"text":"If site is down then display.","nodeType":"comment","id":"6u0"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6u40"},{"name":"prompt","parent":"Wall","nodeType":"propertyRef","id":"6u31"},{"op":"(","nodeType":"operator","id":"6u32"},{"nodeType":"localRef","name":"dom","localId":"24","id":"6u420"},{"op":"∥","nodeType":"operator","id":"6u34"},{"nodeType":"stringLiteral","value":" Is not working.","id":"6u421"},{"op":")","nodeType":"operator","id":"6u36"}],"tree":{"name":"prompt","parent":"Wall","nodeType":"call","args":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"6u40"},{"name":"∥","parent":"String","nodeType":"call","args":[{"nodeType":"localRef","name":"dom","localId":"24","id":"6u420"},{"nodeType":"stringLiteral","value":" Is not working.","id":"6u421"}],"id":"6u41"}],"id":"6u3"},"locals":[],"nodeType":"exprHolder","id":"6u2"},"nodeType":"exprStmt","id":"6u1"}],"nodeType":"if","id":"6p"}],"id":"1"},{"name":"go","inParameters":[],"outParameters":[],"isPrivate":false,"isOffloaded":false,"isTest":false,"nodeType":"action","body":[{"text":"Lets call it, then we can add other functionality/routines later.","nodeType":"comment","id":"b0"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"b40"},{"name":"isitup","parent":"code","declId":"1","nodeType":"propertyRef","id":"b31"}],"tree":{"name":"isitup","parent":"code","declId":"1","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"b40"}],"id":"b3"},"locals":[],"nodeType":"exprHolder","id":"b2"},"nodeType":"exprStmt","id":"b1"},{"expr":{"tokens":[{"nodeType":"localRef","name":"b","localId":"70","id":"b70"},{"op":":=","nodeType":"operator","id":"b61"},{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"b720"},{"name":"ask boolean","parent":"Wall","nodeType":"propertyRef","id":"b63"},{"op":"(","nodeType":"operator","id":"b64"},{"nodeType":"stringLiteral","value":"Check another?","id":"b721"},{"op":",","nodeType":"operator","id":"b66"},{"nodeType":"stringLiteral","value":"","id":"b722"},{"op":")","nodeType":"operator","id":"b68"}],"tree":{"name":":=","parent":"Unknown","nodeType":"call","args":[{"nodeType":"localRef","name":"b","localId":"70","id":"b70"},{"name":"ask boolean","parent":"Wall","nodeType":"call","args":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"b720"},{"nodeType":"stringLiteral","value":"Check another?","id":"b721"},{"nodeType":"stringLiteral","value":"","id":"b722"}],"id":"b71"}],"id":"b6"},"locals":[{"name":"b","type":"Boolean","nodeType":"localDef","id":"70"}],"nodeType":"exprHolder","id":"b5"},"nodeType":"exprStmt","id":"b4"},{"condition":{"tokens":[{"nodeType":"localRef","name":"b","localId":"70","id":"b9"}],"tree":{"nodeType":"localRef","name":"b","localId":"70","id":"b9"},"locals":[],"nodeType":"exprHolder","id":"b8"},"thenBody":[{"expr":{"tokens":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"bb30"},{"name":"clear","parent":"Wall","nodeType":"propertyRef","id":"bb21"}],"tree":{"name":"clear","parent":"Wall","nodeType":"call","args":[{"nodeType":"singletonRef","name":"wall","type":"Wall","id":"bb30"}],"id":"bb2"},"locals":[],"nodeType":"exprHolder","id":"bb1"},"nodeType":"exprStmt","id":"bb0"},{"expr":{"tokens":[{"nodeType":"singletonRef","name":"code","type":"code","id":"bb60"},{"name":"go","parent":"code","declId":"6","nodeType":"propertyRef","id":"bb51"}],"tree":{"name":"go","parent":"code","declId":"6","nodeType":"call","args":[{"nodeType":"singletonRef","name":"code","type":"code","id":"bb60"}],"id":"bb5"},"locals":[],"nodeType":"exprHolder","id":"bb4"},"nodeType":"exprStmt","id":"bb3"}],"elseBody":[{"expr":{"tokens":[],"tree":{"nodeType":"singletonRef","name":"$skip","type":"Unknown","id":"bc2"},"locals":[],"nodeType":"exprHolder","id":"bc1"},"nodeType":"exprStmt","id":"bc0"}],"nodeType":"if","id":"b7"}],"id":"6"}],"nodeType":"app","id":"0"}

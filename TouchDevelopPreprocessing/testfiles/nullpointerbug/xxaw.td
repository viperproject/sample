meta version "v2.2,nothing";
meta name "my player";
meta icon "mp3player";
meta color "#ffff0038";
//
meta platform "current,accelerometer,gyroscope,home,motion,phone";

action main() {
  codeâ†’index;
}

event tap_wall_Page_Button(item: Page_Button) {
  $s := $itemâ†’text;
  $b := true;
  codeâ†’ontab($s, $b);
  meta private;
}
var play\u002Fpause : Page_Button {
}
var edit : Page_Button {
}

event tap_wall_String(item: String) {
  if($itemâ†’equals("Songs")) then {
    codeâ†’songs;
  }
  if $itemâ†’equals("Playlist") then {
    codeâ†’playlist;
  }
  if $itemâ†’equals("Songs album") then {
    codeâ†’album;
  }
  meta private;
}

action album() {
  dataâ†’page := wallâ†’push_new_page;
  dataâ†’pageno := "Album";
  wallâ†’clear;
  wallâ†’clear_buttons;
  wallâ†’set_title("Album");
  mediaâ†’song_albumsâ†’post_to_wall;
  tags;
  codeâ†’wallbutton;
  meta private;
}

action songs() {
  dataâ†’page := wallâ†’push_new_page;
  dataâ†’pageno := "Song";
  wallâ†’set_title("Songs");
  wallâ†’clear_buttons;
  $songs := mediaâ†’songs;
  $songsâ†’post_to_wall;
  ... ;
  codeâ†’wallbutton;
  meta private;
}

action playlist() {
  dataâ†’page := wallâ†’push_new_page;
  dataâ†’pageno := "Playlist";
  wallâ†’clear;
  wallâ†’set_title("Playlist");
  wallâ†’clear_buttons;
  mediaâ†’playlistsâ†’post_to_wall;
  codeâ†’wallbutton;
  meta private;
}

event tap_wall_Song_Album(item: Song_Album) {
  dataâ†’pageno := "Albumsong";
  wallâ†’push_new_page;
  wallâ†’clear;
  wallâ†’clear_buttons;
  wallâ†’set_reversed(true);
  wallâ†’set_title($itemâ†’name);
  $itemâ†’artâ†’post_to_wall;
  $itemâ†’songsâ†’post_to_wall;
  dataâ†’songcoll := $itemâ†’songs;
  codeâ†’wallbutton;
  meta private;
}

event tap_wall_Song(item: Song) {
  wallâ†’push_new_page;
  dataâ†’pageno := "Songplay";
  wallâ†’clear;
  wallâ†’clear_buttons;
  wallâ†’set_reversed(true);
  wallâ†’set_title($itemâ†’name);
  $pic := $itemâ†’albumâ†’art;
  $picâ†’resize(200, - 100);
  $picâ†’post_to_wall;
  $itemâ†’albumâ†’nameâ†’post_to_wall;
  $itemâ†’artistâ†’post_to_wall;
  $itemâ†’genreâ†’post_to_wall;
  $x := $itemâ†’duration;
  $x := $x / 60;
  $x := mathâ†’round_with_precision($x, 2);
  $xâ†’post_to_wall;
  playerâ†’play($item);
  ... ;
  codeâ†’wallbutton;
  meta private;
}
var menu : Tile {
  readonly = true;
}
var setting : Page_Button {
}

action wallbutton() {
  wallâ†’clear_buttons;
  if playerâ†’is_playing then {
    dataâ†’play\u002Fpause := wallâ†’add_button("transport.pause", "Pause");
  }
  else {
    dataâ†’play\u002Fpause := wallâ†’add_button("transport.play", "Play");
  }
  meta private;
}

action index() {
  wallâ†’clear_buttons;
  wallâ†’set_title("Songs");
  wallâ†’set_subtitle("Select option");
  wallâ†’set_reversed(true);
  dataâ†’pageno := "Index";
  dataâ†’menuâ†’set_title("My player");
  dataâ†’pageno := "Home";
  "\n\n" â†’post_to_wall;
  "Songs" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "Songs album" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "Playlist" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  "\n\n" â†’post_to_wall;
  ... ;
  "\n\n" â†’post_to_wall;
  wallâ†’create_text_box("Instruction", 19)â†’post_to_wall;
  wallâ†’create_text_box("Advance setting", 19)â†’post_to_wall;
  codeâ†’wallbutton;
  meta private;
}
var song : Song {
}

action ontab(item: String, b: Boolean) {
  ... ;
  $s := dataâ†’editâ†’text;
  $s1 := dataâ†’play\u002Fpauseâ†’text;
  if $itemâ†’equals($s) and $b then {
    dataâ†’page := wallâ†’push_new_page;
    wallâ†’set_title("Help");
    "\n\n\n" â†’post_to_wall;
    "             ðŸŽ·shake to shuffle songðŸŽ¸" â†’post_to_wall;
    "\n\n\n\n" â†’post_to_wall;
    $b := false;
  }
  if $itemâ†’equals($s1) and $b then {
    if playerâ†’is_paused and $b then {
      playerâ†’active_songâ†’play;
      wallâ†’clear_buttons;
      codeâ†’wallbutton;
      $b := false;
    }
    if playerâ†’is_playing and $b then {
      playerâ†’pause;
      wallâ†’clear_buttons;
      codeâ†’wallbutton;
      $b := false;
    }
  }
  meta private;
}
var playlist2 : Playlist {
}
var songcoll : Songs {
}

action collection(s1: String) {
  ... ;
  meta private;
}
var page : Page {
}
var pageno : String {
}

event page_navigated_from() {
  codeâ†’wallbutton;
  meta private;
}

action go() {
  if playerâ†’is_playing then {
    dataâ†’play\u002Fpause := wallâ†’add_button("transport.pause", "Pause");
    dataâ†’edit := wallâ†’add_button("edit", "Help");
    dataâ†’setting := wallâ†’add_button("feature.settings", "Setting");
  }
  else {
    dataâ†’play\u002Fpause := wallâ†’add_button("transport.play", "Play");
    dataâ†’edit := wallâ†’add_button("edit", "Help");
    dataâ†’setting := wallâ†’add_button("feature.settings", "Setting");
  }
  meta private;
}

event shake() {
  mediaâ†’songsâ†’randomâ†’play;
  codeâ†’wallbutton;
  meta private;
}

event tap_wall_TextBox(item: TextBox) {
  $s := "Instruction";
  ... ;
  $s1 := "Advance setting";
  if $itemâ†’textâ†’equals($s1) then {
    skip;
  }
  if $itemâ†’textâ†’equals($s) then {
    dataâ†’page := wallâ†’push_new_page;
    wallâ†’set_title("Help");
    "\n\n\n" â†’post_to_wall;
    "             ðŸŽ·shake to shuffle songðŸŽ¸" â†’post_to_wall;
    "\n\n\n\n" â†’post_to_wall;
  }
  meta private;
}


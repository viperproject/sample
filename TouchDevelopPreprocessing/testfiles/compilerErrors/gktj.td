meta version "v2.2,nothing";
meta name "pictionary";
meta icon "shuffle";
meta color "#ffff0038";
// shows random pictograms of animals, fruits, vegetables and other things. Select language, tap pic to translate. New version with FAQ - mode. Color bug fix.
meta platform "current";

action main() {
  dataâ†’counter := 0;
  dataâ†’solved := 0;
  dataâ†’mode := 0;
  $s := languagesâ†’current_language;
  dataâ†’language := $s;
  dataâ†’i\u002Dmode := true;
  codeâ†’init_animal_map;
  codeâ†’init_food_map;
  codeâ†’init_things_map;
  codeâ†’init_all_things_map;
  codeâ†’create_langNameMap;
  codeâ†’poste_lang_menu;
  codeâ†’post_mode_menu;
}

action init_animal_map() {
  if dataâ†’animals_mapâ†’is_invalid or true then {
    dataâ†’animals_map := collectionsâ†’create_string_map;
    dataâ†’animals_mapâ†’set_at("ðŸœ", "ant");
    dataâ†’animals_mapâ†’set_at("ðŸ", "bee");
    dataâ†’animals_mapâ†’set_at("ðŸ—", "boar");
    dataâ†’animals_mapâ†’set_at("ðŸ‚", "bull");
    dataâ†’animals_mapâ†’set_at("ðŸ‡", "bunny");
    dataâ†’animals_mapâ†’set_at("ðŸ«", "camel");
    dataâ†’animals_mapâ†’set_at("ðŸˆ", "cat");
    dataâ†’animals_mapâ†’set_at("ðŸ“", "cock");
    dataâ†’animals_mapâ†’set_at("ðŸ„", "cow");
    dataâ†’animals_mapâ†’set_at("ðŸ£", "chick");
    dataâ†’animals_mapâ†’set_at("ðŸ•", "dog");
    dataâ†’animals_mapâ†’set_at("ðŸ˜", "elephant");
    dataâ†’animals_mapâ†’set_at("ðŸ ", "fish");
    dataâ†’animals_mapâ†’set_at("ðŸ¬", "dolphin");
    dataâ†’animals_mapâ†’set_at("ðŸª", "dromedary");
    dataâ†’animals_mapâ†’set_at("ðŸ¸", "frog");
    dataâ†’animals_mapâ†’set_at("ðŸ¨", "koala");
    dataâ†’animals_mapâ†’set_at("ðŸ”", "chicken");
    dataâ†’animals_mapâ†’set_at("ðŸž", "ladybug");
    dataâ†’animals_mapâ†’set_at("ðŸ’", "monkey");
    dataâ†’animals_mapâ†’set_at("ðŸ€", "mouse");
    dataâ†’animals_mapâ†’set_at("ðŸ™", "octopus");
    dataâ†’animals_mapâ†’set_at("ðŸ§", "penguin");
    dataâ†’animals_mapâ†’set_at("ðŸ–", "pig");
    dataâ†’animals_mapâ†’set_at("ðŸ¦", "pigeon");
    dataâ†’animals_mapâ†’set_at("ðŸ©", "poodle");
    dataâ†’animals_mapâ†’set_at("ðŸ¢", "turtle");
    dataâ†’animals_mapâ†’set_at("ðŸ‘", "sheep");
    dataâ†’animals_mapâ†’set_at("ðŸ", "goat");
    dataâ†’animals_mapâ†’set_at("ðŸ", "aries");
    dataâ†’animals_mapâ†’set_at("ðŸŽ", "horse");
    dataâ†’animals_mapâ†’set_at("ðŸ", "serpent");
    dataâ†’animals_mapâ†’set_at("ðŸŒ", "snail");
    dataâ†’animals_mapâ†’set_at("ðŸ‹", "whale");
  }
  meta private;
}
var animals_map : String_Map {
}
var board : Board {
}
var sprite_pic : Sprite {
}

action init_board() {
  dataâ†’board := mediaâ†’create_board(460);
  dataâ†’boardâ†’set_background(colorsâ†’chrome);
  $pic1 := mediaâ†’create_picture(400, 400);
  dataâ†’sprite_pic := dataâ†’boardâ†’create_picture($pic1);
  meta private;
}

action create_rnd_sprite() {
  if not dataâ†’i\u002Dmode then {
    dataâ†’counter := dataâ†’counter + 1;
  }
  dataâ†’sprite_picâ†’hide;
  dataâ†’sprite_picâ†’delete;
  recordsâ†’Sprite_decoratorâ†’clear;
  $s := "";
  if dataâ†’mode = 0 then {
    $s := codeâ†’get_random_string(dataâ†’animals_map);
  }
  else {
    if dataâ†’mode = 1 then {
      $s := codeâ†’get_random_string(dataâ†’food_map);
    }
    else {
      if dataâ†’mode = 2 then {
        $s := codeâ†’get_random_string(dataâ†’things_map);
      }
      else {
        if dataâ†’mode = 3 then {
          $s := codeâ†’get_random_string(dataâ†’all_things_map);
        }
      }
    }
  }
  $pic := mediaâ†’create_picture(400, 400);
  $c1 := colorsâ†’random;
  $x := $c1â†’brightness;
  if colorsâ†’is_light_theme and $c1â†’brightness > 0.8 then {
    $c1 := $c1â†’darken(0.4);
  }
  else {
    if not colorsâ†’is_light_theme and $c1â†’brightness < 0.4 then {
      $c1 := $c1â†’lighten(0.4);
    }
  }
  $picâ†’fill_rect(0, 0, 400, 400, 0, $c1);
  $picâ†’draw_text(10, 10, $s, 380, 0, colorsâ†’chrome);
  $c := colorsâ†’linear_gradient($c1, colorsâ†’background, 0);
  $picâ†’draw_rect(0, 0, 400, 400, 0, $c, 3);
  dataâ†’sprite_pic := dataâ†’boardâ†’create_picture($pic);
  $s1 := "";
  if dataâ†’mode = 0 then {
    $s1 := dataâ†’animals_mapâ†’at($s);
  }
  else {
    if dataâ†’mode = 1 then {
      $s1 := dataâ†’food_mapâ†’at($s);
    }
    else {
      if dataâ†’mode = 2 then {
        $s1 := dataâ†’things_mapâ†’at($s);
      }
      else {
        if dataâ†’mode = 3 then {
          $s1 := dataâ†’all_things_mapâ†’at($s);
        }
      }
    }
  }
  $t := recordsâ†’Sprite_decoratorâ†’at(dataâ†’sprite_pic);
  $tâ†’nameâ†’set($s1);
  $tâ†’is_picâ†’set(true);
  dataâ†’sprite_picâ†’show;
  meta private;
}

event tap_sprite\u003A_sprite_pic(sprite: Sprite, x: Number, y: Number) {
  $is_pic := recordsâ†’Sprite_decoratorâ†’at($sprite)â†’is_picâ†’get;
  if $is_pic then {
    $equal := false;
    if dataâ†’i\u002Dmode then {
      codeâ†’create_translation;
    }
    else {
      wallâ†’push_new_page;
      wallâ†’set_reversed(true);
      $pic := $spriteâ†’pictureâ†’clone;
      $picâ†’post_to_wall;
      $picâ†’resize(100, - 1);
      $s1 := wallâ†’ask_string("Solution?");
      $s1 := $s1â†’to_lower_case;
      $s := recordsâ†’Sprite_decoratorâ†’at(dataâ†’sprite_pic)â†’nameâ†’get;
      $s2 := languagesâ†’translate("en", dataâ†’language, $s);
      $s2 := $s2â†’to_lower_case;
      $equal := $s2â†’contains($s1);
      wallâ†’clear;
      wallâ†’pop_page;
      if $equal then {
        dataâ†’solved := dataâ†’solved + 1;
        if dataâ†’mode = 0 then {
          codeâ†’decrement_strg_map(dataâ†’animals_map, $s);
        }
        else {
          if dataâ†’mode = 1 then {
            codeâ†’decrement_strg_map(dataâ†’food_map, $s);
          }
          else {
            if dataâ†’mode = 2 then {
              codeâ†’decrement_strg_map(dataâ†’things_map, $s);
            }
            else {
              if dataâ†’mode = 3 then {
                codeâ†’decrement_strg_map(dataâ†’all_things_map, $s);
              }
            }
          }
        }
      }
      $check := "âœ” ";
      if $equal then {
        $check := "âœ” ";
      }
      else {
        $check := "âœ˜ ";
      }
      ... ;
      wallâ†’set_subtitle($check âˆ¥ "tried: " âˆ¥ dataâ†’counter âˆ¥ "  solved: " âˆ¥ dataâ†’solved);
      codeâ†’create_translation;
      ... ;
    }
  }
  else {
    codeâ†’create_rnd_sprite;
  }
  dataâ†’boardâ†’update_on_wall;
  meta private;
}
table thing {
  type = "Decorator";
  keys {
    target: Sprite
  }
  fields {
    name: String_field
    is_pic: Boolean_field
  }
}
var solve : Boolean {
}

action create_translation() {
  $s := recordsâ†’Sprite_decoratorâ†’at(dataâ†’sprite_pic)â†’nameâ†’get;
  $s := $sâ†’to_upper_case;
  $s := languagesâ†’translate("en", dataâ†’language, $s);
  $x_offset := 200 - $sâ†’count / 2 * 20;
  $pic1 := dataâ†’sprite_picâ†’pictureâ†’clone;
  dataâ†’sprite_picâ†’hide;
  dataâ†’sprite_picâ†’delete;
  recordsâ†’Sprite_decoratorâ†’clear;
  $pic := mediaâ†’create_picture(400, 400);
  $c1 := colorsâ†’random;
  $c2 := $pic1â†’pixel(20, 370)â†’darken(0.1);
  $c2â†’make_transparent(0.8);
  if false then {
    $picâ†’fill_rect(0, 0, 400, 400, 0, $c1);
  }
  else {
    $picâ†’fill_rect(5, 352, 390, 45, 0, $c2);
  }
  $picâ†’draw_text($x_offset, 355, $s, 36, 0, colorsâ†’background);
  $pic1â†’blend($pic, 0, 0, 0, 0.95);
  $c := colorsâ†’linear_gradient($c1, colorsâ†’blue, 0);
  if true then {
    skip;
  }
  dataâ†’sprite_pic := dataâ†’boardâ†’create_picture($pic1);
  $s1 := dataâ†’animals_mapâ†’at($s);
  $t := recordsâ†’Sprite_decoratorâ†’at(dataâ†’sprite_pic);
  $tâ†’is_picâ†’set(false);
  dataâ†’sprite_picâ†’show;
  dataâ†’boardâ†’update_on_wall;
  $b := codeâ†’valid_for_speak(dataâ†’language);
  if $b then {
    $sound := languagesâ†’speak(dataâ†’language, $s);
    if not $soundâ†’is_invalid then {
      $x := $soundâ†’duration;
      $soundâ†’play;
      timeâ†’sleep($x);
    }
  }
  meta private;
}

action poste_lang_menu() {
  recordsâ†’TextBox_decoratorâ†’clear;
  wallâ†’set_reversed(true);
  dataâ†’page_lang_menu := wallâ†’current_page;
  $strings := dataâ†’languageNamesâ†’keys;
  $x := $stringsâ†’count;
  $x1 := $x;
  foreach s in $strings where true do {
    $x := $x - 1;
    $c := colorsâ†’linear_gradient(colorsâ†’magenta, colorsâ†’blue, $x / $x1);
    $s1 := dataâ†’languageNamesâ†’at($s);
    $tb := wallâ†’create_text_box($s1, 40);
    $tbâ†’set_foreground($c);
    recordsâ†’TextBox_decoratorâ†’at($tb)â†’lang_short_nameâ†’set($s);
    $tbâ†’post_to_wall;
  }
  meta private;
}

action create_langNameMap() {
  dataâ†’languageNames := collectionsâ†’create_string_map;
  $langs := "ar,bg,ca,cs,da,de,el,en,es,et,fa,fi,fr,he,hu,ht,id,it,ja,ko,lt,lv,mww,no,nl,pl,pt,ro,ru,sk,sl,sv,th,tr,uk,vi,zh-CHS,zh-CHT" â†’split(",");
  $n := $langsâ†’count;
  $langNames := "Arabic,Bulgarian,Catalan,Czech,Danish,German,Greek,English,Spanish,Estonian,Persian,Finnish,French,Hebrew,Hungarian,Haitian Creole,Indonesian,Italian,Japanese,Korean,Lithuanian,Latvian,Hmong Daw,Norwegian,Dutch,Polish,Portuguese,Romanian,Russian,Slovak,Slovenian,Swedish,Thai,Turkish,Ukrainian,Vietnamese,Chinese (Simpl.),Chinese (Trad.)" â†’split(",");
  for 0 â‰¤ i < $n do {
    $n1 := $langsâ†’at($i);
    $N := $langNamesâ†’at($i);
    dataâ†’languageNamesâ†’set_at($n1, $N);
  }
  meta private;
}
var languageNames : String_Map {
}
table thing2 {
  type = "Decorator";
  keys {
    target: TextBox
  }
  fields {
    lang_short_name: String_field
  }
}

event tap_wall_TextBox(item: TextBox) {
  if wallâ†’current_pageâ†’equals(dataâ†’page_lang_menu) then {
    $t := recordsâ†’TextBox_decoratorâ†’at($item);
    dataâ†’language := $tâ†’lang_short_nameâ†’get;
    codeâ†’post_mode_menu;
  }
  else {
    if wallâ†’current_pageâ†’equals(dataâ†’page_mode_menu) then {
      if $itemâ†’textâ†’equals("ANIMALS") then {
        dataâ†’mode := 0;
      }
      else {
        if $itemâ†’textâ†’equals("FOODS") then {
          dataâ†’mode := 1;
        }
        else {
          if $itemâ†’textâ†’equals("VARIOUS OBJECTS") then {
            dataâ†’mode := 2;
          }
          else {
            if $itemâ†’textâ†’equals("ALL OBJECTS") then {
              dataâ†’mode := 3;
            }
            else {
              dataâ†’mode := 0;
            }
          }
        }
      }
      codeâ†’open_board;
    }
  }
  meta private;
}
var language : String {
}

action open_board() {
  wallâ†’push_new_page;
  wallâ†’add_button("check", "i-mode");
  wallâ†’set_reversed(true);
  $s := dataâ†’languageNamesâ†’at(dataâ†’language);
  wallâ†’set_title($s);
  codeâ†’init_board;
  codeâ†’create_rnd_sprite;
  dataâ†’boardâ†’post_to_wall;
  meta private;
}

action valid_for_speak(lang: String) returns speak: Boolean {
  // Bing language speech support for
  // ca,da,de,en,es,fi,fr,it,ja,ko,no,nl,pl,pt,ru,sv,zh-CHS,zh-CHT
  $speak := false;
  $valid_for_speak := "ca,da,de,en,es,fi,fr,it,ja,ko,no,nl,pl,pt,ru,sv,zh-CHS,zh-CHT" â†’split(",");
  foreach s in $valid_for_speak where $sâ†’equals($lang) do {
    $speak := true;
  }
  meta private;
}

action init_food_map() {
  if dataâ†’food_mapâ†’is_invalid or true then {
    dataâ†’food_map := collectionsâ†’create_string_map;
    dataâ†’food_mapâ†’set_at("ðŸ“", "strawberry");
    dataâ†’food_mapâ†’set_at("ðŸ’", "cherry");
    dataâ†’food_mapâ†’set_at("ðŸ‘", "peach");
    dataâ†’food_mapâ†’set_at("ðŸ", "pear");
    dataâ†’food_mapâ†’set_at("ðŸŽ", "Apple");
    dataâ†’food_mapâ†’set_at("ðŸ", "pineapple");
    dataâ†’food_mapâ†’set_at("ðŸŒ", "banana");
    dataâ†’food_mapâ†’set_at("ðŸ‹", "lemon");
    dataâ†’food_mapâ†’set_at("ðŸ‰", "melon");
    dataâ†’food_mapâ†’set_at("ðŸ‡", "grapes");
    dataâ†’food_mapâ†’set_at("ðŸ…", "tomato");
    dataâ†’food_mapâ†’set_at("ðŸ„", "mushroom");
    dataâ†’food_mapâ†’set_at("ðŸ°", "torte");
    dataâ†’food_mapâ†’set_at("ðŸ­", "lolly");
    dataâ†’food_mapâ†’set_at("ðŸ¬", "candy");
    dataâ†’food_mapâ†’set_at("ðŸ«", "chocolate");
    dataâ†’food_mapâ†’set_at("ðŸª", "tortilla");
    dataâ†’food_mapâ†’set_at("ðŸ©", "donut");
    dataâ†’food_mapâ†’set_at("ðŸ¨", "ice cream");
    dataâ†’food_mapâ†’set_at("ðŸŸ", "fries");
    dataâ†’food_mapâ†’set_at("ðŸž", "bread");
    dataâ†’food_mapâ†’set_at("ðŸœ", "bowl of noodle");
    dataâ†’food_mapâ†’set_at("ðŸ•", "pizza");
    dataâ†’food_mapâ†’set_at("ðŸ”", "hamburger");
    dataâ†’food_mapâ†’set_at("ðŸš", "bowl of rice");
  }
  meta private;
}
var food_map : String_Map {
}
var page_lang_menu : Page {
}

action post_mode_menu() {
  wallâ†’push_new_page;
  wallâ†’add_button("back", "lang");
  wallâ†’set_reversed(true);
  ... ;
  dataâ†’page_mode_menu := wallâ†’current_page;
  $tb := wallâ†’create_text_box("ANIMALS", 40);
  $pic := mediaâ†’create_picture(60, 60);
  $picâ†’draw_text(0, 0, "ðŸ“", 55, 0, colorsâ†’blue);
  $picâ†’update_on_wall;
  $tbâ†’set_icon($pic);
  $tbâ†’post_to_wall;
  $tb1 := wallâ†’create_text_box("FOODS", 40);
  $pic := mediaâ†’create_picture(60, 60);
  $picâ†’draw_text(0, 0, "ðŸ‡", 55, 0, colorsâ†’green);
  $tb1â†’set_icon($pic);
  $picâ†’update_on_wall;
  $tb1â†’post_to_wall;
  $tb2 := wallâ†’create_text_box("VARIOUS OBJECTS", 40);
  $pic := mediaâ†’create_picture(60, 60);
  $picâ†’draw_text(0, 0, "â˜", 55, 0, colorsâ†’blue);
  $picâ†’update_on_wall;
  $tb2â†’set_icon($pic);
  $tb2â†’post_to_wall;
  $tb3 := wallâ†’create_text_box("ALL OBJECTS", 40);
  $pic := mediaâ†’create_picture(60, 60);
  $picâ†’draw_text(0, 0, "ðŸˆðŸŽ\nðŸ‘ªðŸ‘ª", 25, 0, colorsâ†’red);
  $picâ†’update_on_wall;
  $tb3â†’set_icon($pic);
  $tb3â†’post_to_wall;
  meta private;
}
var page_mode_menu : Page {
}
var mode : Number {
}

action init_things_map() {
  if dataâ†’things_mapâ†’is_invalid or true then {
    dataâ†’things_map := collectionsâ†’create_string_map;
    dataâ†’things_mapâ†’set_at("ðŸ´", "cutlery");
    dataâ†’things_mapâ†’set_at("ðŸµ", "coffee cup");
    dataâ†’things_mapâ†’set_at("ðŸ·", "glass");
    dataâ†’things_mapâ†’set_at("ðŸŽ·", "saxophone");
    dataâ†’things_mapâ†’set_at("ðŸŽ¸", "guitar");
    dataâ†’things_mapâ†’set_at("ðŸŽ»", "violin");
    dataâ†’things_mapâ†’set_at("ðŸŽº", "trumpet");
    dataâ†’things_mapâ†’set_at("âœ„", "scissors");
    dataâ†’things_mapâ†’set_at("âœˆ", "airplane");
    dataâ†’things_mapâ†’set_at("âœ‹", "hand");
    dataâ†’things_mapâ†’set_at("âœŽ", "pencil");
    dataâ†’things_mapâ†’set_at("â€", "flower");
    dataâ†’things_mapâ†’set_at("â¤", "heart");
    dataâ†’things_mapâ†’set_at("â›Ÿ", "truck");
    dataâ†’things_mapâ†’set_at("â˜‚", "umbrella");
    dataâ†’things_mapâ†’set_at("â˜", "cloud");
    dataâ†’things_mapâ†’set_at("â›µ", "sail boat");
    dataâ†’things_mapâ†’set_at("â˜Ž", "telephone");
    dataâ†’things_mapâ†’set_at("ðŸ”¨", "hammer");
    dataâ†’things_mapâ†’set_at("ðŸ”ª", "knife");
    dataâ†’things_mapâ†’set_at("ðŸ“·", "camera");
    dataâ†’things_mapâ†’set_at("ðŸ“±", "cell phone");
    dataâ†’things_mapâ†’set_at("ðŸ“–", "book");
    dataâ†’things_mapâ†’set_at("ðŸŒ", "globe");
    dataâ†’things_mapâ†’set_at("ðŸŒŸ", "star");
    dataâ†’things_mapâ†’set_at("ðŸŒ´", "palm tree");
    dataâ†’things_mapâ†’set_at("ðŸŒµ", "cactus");
    dataâ†’things_mapâ†’set_at("ðŸŒ·", "tulip");
    dataâ†’things_mapâ†’set_at("ðŸŽƒ", "calabash");
    dataâ†’things_mapâ†’set_at("ðŸ‘€", "eyes");
    dataâ†’things_mapâ†’set_at("ðŸ‘‚", "ear");
    dataâ†’things_mapâ†’set_at("ðŸ‘ƒ", "nose");
    dataâ†’things_mapâ†’set_at("ðŸ‘„", "mouth");
    dataâ†’things_mapâ†’set_at("ðŸ‘…", "tongue");
    dataâ†’things_mapâ†’set_at("ðŸ‘“", "glasses");
    dataâ†’things_mapâ†’set_at("ðŸŽ­", "masks");
    dataâ†’things_mapâ†’set_at("ðŸ’", "kissing");
    dataâ†’things_mapâ†’set_at("ðŸ””", "chime");
    dataâ†’things_mapâ†’set_at("ðŸ”’", "padlock");
    dataâ†’things_mapâ†’set_at("ðŸ”‘", "key");
    dataâ†’things_mapâ†’set_at("ðŸ”Ž", "magnifier");
    dataâ†’things_mapâ†’set_at("ðŸ”Œ", "power cort");
    dataâ†’things_mapâ†’set_at("ðŸ’¡", "bulb");
    dataâ†’things_mapâ†’set_at("ðŸ’£", "bomb");
    dataâ†’things_mapâ†’set_at("ðŸ‘»", "ghost");
    dataâ†’things_mapâ†’set_at("ðŸ‘¼", "angle");
    dataâ†’things_mapâ†’set_at("ðŸ‘¶", "baby");
    dataâ†’things_mapâ†’set_at("ðŸ‘ª", "familie");
    dataâ†’things_mapâ†’set_at("ðŸ‘•", "shirt");
    dataâ†’things_mapâ†’set_at("ðŸ‘–", "trousers");
    dataâ†’things_mapâ†’set_at("ðŸ‘—", "dress");
    dataâ†’things_mapâ†’set_at("ðŸ‘ž", "shoe");
    dataâ†’things_mapâ†’set_at("ðŸ‘¢", "boots");
    dataâ†’things_mapâ†’set_at("ðŸ°", "castle");
    dataâ†’things_mapâ†’set_at("ðŸ ", "house");
  }
  meta private;
}
var things_map : String_Map {
}
var all_things_map : String_Map {
}

action init_all_things_map() {
  if dataâ†’all_things_mapâ†’is_invalid or true then {
    dataâ†’all_things_map := collectionsâ†’create_string_map;
    dataâ†’all_things_mapâ†’set_many(dataâ†’animals_map);
    dataâ†’all_things_mapâ†’set_many(dataâ†’food_map);
    dataâ†’all_things_mapâ†’set_many(dataâ†’things_map);
  }
  meta private;
}

event page_navigated_from() {
  if wallâ†’current_pageâ†’equals(dataâ†’page_mode_menu) then {
    dataâ†’mode := 0;
  }
  meta private;
}

action clear_string_maps() {
  foreach key in dataâ†’animals_mapâ†’keys where true do {
    dataâ†’animals_mapâ†’remove($key);
  }
  foreach key1 in dataâ†’food_mapâ†’keys where true do {
    dataâ†’food_mapâ†’remove($key1);
  }
  foreach key2 in dataâ†’things_mapâ†’keys where true do {
    dataâ†’things_mapâ†’remove($key2);
  }
  foreach key3 in dataâ†’all_things_mapâ†’keys where true do {
    dataâ†’all_things_mapâ†’remove($key3);
  }
  dataâ†’animals_map := invalidâ†’string_map;
  dataâ†’food_map := invalidâ†’string_map;
  dataâ†’things_map := invalidâ†’string_map;
  dataâ†’all_things_map := invalidâ†’string_map;
}

event tap_wall_Page_Button(item: Page_Button) {
  if $itemâ†’iconâ†’equals("back") then {
    wallâ†’pop_page;
  }
  else {
    dataâ†’i\u002Dmode := $itemâ†’textâ†’equals("i-mode") and $itemâ†’iconâ†’contains("check");
    if dataâ†’i\u002Dmode then {
      wallâ†’clear_buttons;
      wallâ†’add_button("back", "lang");
      wallâ†’add_button("questionmark", "? mode");
      dataâ†’i\u002Dmode := false;
    }
    else {
      wallâ†’clear_buttons;
      wallâ†’add_button("back", "lang");
      wallâ†’add_button("check", "i-mode");
      dataâ†’i\u002Dmode := true;
    }
  }
  meta private;
}
var i\u002Dmode : Boolean {
}

action get_random_string(d1: String_Map) returns s: String {
  $x := $d1â†’count;
  if $x = 0 then {
    "Congratulations, you solved all items." â†’post_to_wall;
    timeâ†’stop;
  }
  $s := $d1â†’keysâ†’random;
  meta private;
}

action decrement_strg_map(strg_map: String_Map, s: String) {
  foreach key in $strg_mapâ†’keys where $strg_mapâ†’at($key)â†’equals($s) do {
    $strg_mapâ†’remove($key);
  }
  meta private;
}
var counter : Number {
}
var solved : Number {
}


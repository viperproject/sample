import ch.ethz.inf.pm.td.TestRunner
import ch.ethz.inf.pm.td.webapi.URLFetcher._
import ch.ethz.inf.pm.td.webapi.{Scripts, Script, DowncasedTypeHints}
import java.io.{File, PrintWriter}
import net.liftweb.json._

/**
 * Downloads all scripts of a specific user to a local directory.
 *
 * Set the userid below (e.g. pboj for the TouchDevelop Samples user)
 */

//val dirs = "pietrosbugs"
//
//val pubIDs = List(
// "ymsh",
// "uqbhspnr", // The runtime environment crashes: GNU MP: Cannot allocate memory (size=4)
// "tgwt",
// "hkyt",
// "xfrgnrls",
// "csvxmlas",
// "ddrgoeto",
// "tgwt",
// "ttxj",
// "cahmkcfm",
// "vavohajh"
//)

val dirs = "compilerErrors"

val pubIDs = List(
  "vlln",
  "hvuz",
  "yuwv",
  "vfxq",
  "rwwqa",
  "mell",
  "yrwc",
  "zklywmvv",
  "vlatgfxv",
  "rpat",
  "rdkba",
  "buzchzyy",
  "pbyckclc",
  "vdiieqzd",
  "ddhtpjws",
  "gokw",
  "iqjq",
  "ggaw",
  "xoiv",
  "ednk",
  "rtnt",
  "mjif",
  "blfka",
  "whsccwot",
  "jwmxa",
  "qwzlagbl",
  "zzpi",
  "zotzcxnn",
  "fvmfpwel",
  "ivot",
  "aiqj",
  "hmjvjslz",
  "mzby",
  "egqn",
  "zktk",
  "wvwq",
  "svdr",
  "yvzl",
  "gbud",
  "dizsa",
  "gtvt",
  "ijfppbrg",
  "atwga",
  "sclv",
  "limza",
  "wnkxeutk",
  "agtlb",
  "hxzk",
  "mdze",
  "fimra",
  "nxqy",
  "gzhkqwwj",
  "jnrxfeiz",
  "chbxflrc",
  "hxtm",
  "ksan",
  "uxurzxoq",
  "kuakuzpw",
  "cawv",
  "gwawphro",
  "skzfpehx",
  "zihkb",
  "knqu",
  "evvvcftn",
  "ablgtojv",
  "evxymnqq",
  "rhquazhb",
  "zfpn",
  "aypvivip",
  "hakfviol",
  "eiwr",
  "xljgunun",
  "dwmx",
  "zuqpb",
  "qgbh",
  "zmtl",
  "gktz",
  "dxds",
  "obvf",
  "nnuib",
  "szme",
  "lxqs",
  "nkjvaeww",
  "bvpzdniz",
  "snywxkev",
  "xyii",
  "vojpvuqx",
  "fxwwzabk",
  "eowdvdvh",
  "xverzfvo",
  "qqytsxxw",
  "zsli",
  "labyrgnt",
  "mupr",
  "feow",
  "gktj",
  "yezc",
  "yinnvcyq",
  "wyjmtwdc",
  "xpnmpvyc",
  "oippbbvc",
  "rgduktdb",
  "bthminwe",
  "okuyeyuf",
  "fllwfgbh",
  "lkmz",
  "bhhy",
  "cflz",
  "bbns",
  "kqod",
  "huvz",
  "dcjm",
  "rdgwvmez",
  "zwwvujwd",
  "ijlhidbc",
  "zmmkthps",
  "ryhzoawi",
  "rgmp",
  "mzera",
  "mmhi",
  "deoz",
  "opal",
  "gbdd",
  "mpzx",
  "rhqv",
  "sbloa",
  "pphj",
  "ulbm",
  "ygwe",
  "esss",
  "jjfr",
  "mlcg",
  "rfwi",
  "zixjgjyj",
  "rcpna",
  "mgjd",
  "eibn",
  "mopz",
  "uvdxa",
  "yhpy",
  "onrz",
  "hwlp",
  "yfzp",
  "uahe",
  "wvnp",
  "mexu",
  "txut",
  "hdchcvwb",
  "ircgugek",
  "cgdecofi",
  "wyjo",
  "lezo",
  "zvzybigu",
  "ioqv",
  "qaarotbn",
  "vutmkqdn",
  "btxrdrpr",
  "iokbmdyz",
  "bhcjrrqs",
  "lmae",
  "fsojwkjo",
  "baeca",
  "veifa",
  "iedbb",
  "yzli",
  "eggeqjhc",
  "ojbf",
  "rxqb",
  "wgxf",
  "unbt",
  "fqnu",
  "vbyn",
  "rldsb",
  "vrsbzqty",
  "phlrnoqn",
  "qevt",
  "ytnz",
  "ncsh",
  "yzjbb",
  "napy",
  "iyqd",
  "agwo",
  "hgtcnxmp",
  "qqzm",
  "lqtq",
  "ibwr",
  "vvmw",
  "llptb",
  "erdb",
  "fjkmdkji",
  "oidla",
  "ldbl",
  "dxtw",
  "ayhlb",
  "vkzz",
  "gbmz",
  "vejtbxab",
  "jdknxjuo",
  "hgkhjdcy",
  "mqll",
  "cwsf",
  "lqdba",
  "avkr",
  "ugjr",
  "ldlh",
  "onym",
  "emdu",
  "ayrda",
  "hbtn",
  "shbq",
  "cqyv",
  "xpre",
  "zvrl",
  "konh",
  "zjzg",
  "qudc",
  "lnqna",
  "qxuib",
  "xtpz",
  "lqxga",
  "advp",
  "uikz",
  "ggeoa",
  "uhpya",
  "iuvgnlbz",
  "knrqjrdh",
  "sttw",
  "tbzka",
  "eaof",
  "tqrfa",
  "xxusa",
  "qulb",
  "dhpy",
  "weuxlmbm",
  "plmfozee",
  "kkso",
  "tmfpxteb",
  "dqhc",
  "bmpv",
  "vqdza",
  "gebjligu",
  "tvad",
  "veewfgnd",
  "dxnvemxf",
  "wjod",
  "odrwa",
  "ftth",
  "ucjfa",
  "ckapxfix",
  "tdequljn",
  "egvopuwd",
  "hlsnwifb",
  "nukpa",
  "kcfefrzs",
  "bmaetqnb",
  "vfmbdghf",
  "tbcjgscb",
  "erjma",
  "slpz",
  "kfeza",
  "qqssaios",
  "atyjavph",
  "ijkrkrmg",
  "rkkzvmgl",
  "bcgomzrw",
  "unavchbq",
  "abddmkkk",
  "xetlqguv",
  "nzkeddmk",
  "xptz",
  "uflr",
  "meyf",
  "wfet",
  "lzhg",
  "lytuoxfw",
  "irvwnhdi",
  "cbpiiqev",
  "ltlo",
  "ueel",
  "prema",
  "gxglxuzp",
  "mgjo",
  "gxsd",
  "emrva",
  "qoss",
  "sadh",
  "fpaxa",
  "ttvba",
  "pjde",
  "zzslknqt",
  "diig",
  "aplhb",
  "gyhg",
  "aygea",
  "vpqca",
  "syqh",
  "qafma",
  "vuygvmuq",
  "vyfi",
  "ktnh",
  "jrdu",
  "qxvbqvnd",
  "pwijhtzl",
  "aidkelkq",
  "pgsesjux",
  "fpzs",
  "oypg",
  "kvtn",
  "gdmi",
  "mehwxssc",
  "ahmqabdz",
  "bwij",
  "xnbeppec",
  "jbgmbbcr",
  "emkwa",
  "gihxxlqx",
  "hbrva",
  "gptj",
  "xvmrxfmn",
  "ktfra",
  "nxfpa",
  "insv",
  "tjhf",
  "tmpb",
  "qaxp",
  "yhek",
  "zkad",
  "ikjs",
  "eytxymin",
  "aybmeysq",
  "jmtjlryx",
  "acnhcyeu",
  "gzcqlpnj",
  "uaccmcpo",
  "xxpo",
  "ixdn",
  "stnv",
  "yjqv",
  "djiv",
  "njpx",
  "eiyea",
  "ewlq",
  "pzqb",
  "hvhjbjax",
  "wcjx",
  "bgvx",
  "ohhgwerq",
  "tbdj",
  "lysl",
  "vvep",
  "bxhl",
  "xkhqgrii",
  "muevystr",
  "oqeda",
  "xsxfnpad",
  "lskv",
  "thez",
  "atzq",
  "kezskysx",
  "vvusa",
  "beps",
  "wgjkwvmq",
  "rxvya",
  "qtmr",
  "yihk",
  "sssy",
  "gsuja",
  "hddja",
  "anwybqdj",
  "wjxz",
  "xemhrrsj",
  "ahqr",
  "mwxmnkbc",
  "ulnu",
  "ahpca",
  "ugsp",
  "yicw",
  "uldm",
  "qobva",
  "pahqa",
  "nqema",
  "gtxp",
  "ymqrojdz",
  "lhsmazxy",
  "fhah",
  "mqfohifg",
  "eddwzjzv",
  "zuzledcw",
  "prgdnudi",
  "gnsu",
  "yctpa",
  "kymqa",
  "pibp",
  "fzkt",
  "puvm",
  "lcojplvm",
  "yfvt",
  "tsmekpun",
  "ezjuupeb",
  "axio",
  "vqtua",
  "abilwiun",
  "zddua",
  "ttupa",
  "wynz",
  "qdco",
  "fdhi",
  "hbpb",
  "sdzbwros",
  "wgmp",
  "ywpva",
  "lhnr",
  "wfrsa",
  "zgdcaked",
  "tssu",
  "yzfq",
  "wahpa",
  "ymloafzv",
  "asdfa",
  "zmkp",
  "lapcemxf",
  "rqlt",
  "xmrrflkc",
  "mentutkc",
  "wzwo",
  "lkhsa",
  "tqxnxlwx",
  "liji",
  "mwhw",
  "zivpa",
  "gqtz",
  "fekw",
  "qtuo",
  "vfqsa",
  "bobu",
  "xvgu",
  "spwn",
  "ctoj",
  "ilkb",
  "xgzw",
  "fgvqb",
  "svmd",
  "hert",
  "lzqp",
  "bexuqwgz",
  "njkr",
  "feeurrsm",
  "anezjzmx",
  "jmgioxdi",
  "ejhf",
  "irfr",
  "habj",
  "aidj",
  "yifp",
  "hunf",
  "loop",
  "ahqemsbz",
  "ubjtsary",
  "wwej",
  "jhjyheil",
  "yskrb",
  "viropsal",
  "ixdb",
  "erkmlixl",
  "dbqelron",
  "jhlbgwhi",
  "eenn",
  "icxq",
  "tzlz",
  "bxtp",
  "gmbz",
  "jsqb",
  "mhjnumvz",
  "ppsejmwf",
  "fstnddcz",
  "rqglgjaz",
  "hniruzgq",
  "mflzcvkd",
  "nbfvqfcy",
  "xellkfmy",
  "eczeckmj",
  "lyjpgwzg",
  "mqfe",
  "ucvkqhux",
  "cxfra",
  "ihje",
  "qpzg",
  "memx",
  "mbmv",
  "epppa",
  "hnbr",
  "hino",
  "iwyc",
  "forx",
  "myuu",
  "kvyn",
  "jywg",
  "zhyw",
  "egzp",
  "kxxh",
  "tfsc",
  "jzfi",
  "nxbc",
  "ccyn",
  "zllw",
  "rrnm",
  "rljgb",
  "wsyy",
  "tgsh",
  "ogiwa",
  "vnodyixj",
  "dibz",
  "iuzl",
  "kvdu",
  "ixufoibc",
  "rmkrcsko",
  "ujvj",
  "oblw",
  "vywja",
  "vwgv",
  "sifj",
  "oqpx",
  "mnmh",
  "vmgw",
  "dbix",
  "lext",
  "tiwg",
  "vxdm",
  "eeiv",
  "thce",
  "ttbi",
  "aslwa",
  "vfhp",
  "apwj",
  "symi",
  "xvzj",
  "qsfqapof",
  "ltmpb",
  "gjgf",
  "kssq",
  "gdhj",
  "ctcb",
  "bjkn",
  "tyan",
  "pnlx",
  "pzpu",
  "ause",
  "nmqya",
  "buxc",
  "kruhvmiv",
  "ckhv",
  "nyqpujjm",
  "wkpm",
  "zbqf",
  "zfzv",
  "yghl",
  "xvzhgxsx",
  "vhntwspi",
  "nhwfa",
  "swcg",
  "qmwm",
  "cniq",
  "czrl",
  "ccje",
  "bauk",
  "nbdv",
  "uvtj",
  "eivm",
  "oqxd",
  "dbuk",
  "laogsfab",
  "xcrx",
  "wizx",
  "isry",
  "pbje",
  "ozdlhigg",
  "oajw",
  "jxop",
  "nlfk",
  "rztvztkq",
  "vzdsuwnd",
  "xnegtvnu",
  "jgzlsjeh",
  "dbarlscj",
  "jeow",
  "wrsx",
  "cyks",
  "uadla",
  "acyi",
  "kdrv",
  "xkvn",
  "auvya",
  "kwtc",
  "ntbn",
  "ledg",
  "kqji",
  "hhxjuoji",
  "jsqo",
  "sjws",
  "avhu",
  "ezqr",
  "dulx",
  "yeay",
  "wmdda",
  "wupj",
  "gbmmsuni",
  "qody",
  "awxk",
  "haar",
  "ofzya",
  "tlsp",
  "gzyu",
  "yutja",
  "knbg",
  "rptx",
  "lxck",
  "frnj",
  "sushb",
  "xeyi",
  "vemhqung",
  "qogzfkyn",
  "pwsb",
  "ftfmrvgu",
  "zegk",
  "bhqc",
  "gwzs",
  "ppeqa",
  "ojqq",
  "dhcha",
  "qlvxa",
  "jvco",
  "zfvr",
  "ddnz",
  "fblb",
  "trkra",
  "pcnlazbx",
  "dffwnbmn",
  "afksb",
  "byet",
  "fxby",
  "pjsv",
  "lyqjqwkb",
  "cafnlldy",
  "aijeeptr",
  "ateja",
  "vbpq",
  "eonu",
  "bdnkymdl",
  "uwilhvmn",
  "aizluefb",
  "oyty",
  "ewlma",
  "lkfb",
  "ycvq",
  "isdma",
  "anwv",
  "einf",
  "kxidfabp",
  "haldaxke",
  "btfcypym",
  "xydl",
  "gvrt",
  "fogn",
  "shxx",
  "ffag",
  "owiw",
  "jaef",
  "uswy",
  "vtzo",
  "zheq",
  "snvy",
  "gcnx",
  "tooga",
  "jjbw",
  "xweva",
  "qhsz",
  "cnsu",
  "huqv",
  "frzd",
  "juwd",
  "duara",
  "vxcga",
  "lhxxb",
  "bqnm",
  "vhql",
  "oejv",
  "yayda",
  "wnfo",
  "dajwvyzp",
  "gvyjzsez",
  "ivky",
  "vzhqaunw",
  "igzhmeuv",
  "wmjhxpum",
  "tvmkkvwi",
  "syqxpegg",
  "fmyd",
  "vtvsnkco",
  "tpsk",
  "pzhy",
  "shzr",
  "drmj",
  "mhid",
  "snwj",
  "hnxo",
  "ohgv",
  "tlur",
  "nhst",
  "kdre",
  "chmm",
  "oqlhafzd",
  "sixr",
  "yxnozmpj",
  "muzphgno",
  "jzlfsqer",
  "iikjkrmv",
  "kdfxchzh",
  "kyjvrkjd",
  "fldl",
  "pthsqofk",
  "zmai",
  "uuhj",
  "wjyu",
  "nsmjlulf",
  "ppsfldjj",
  "mjpvjlig",
  "ywarbuft",
  "nmkjuppg",
  "mekrfjug",
  "hhnx",
  "ajan",
  "somq",
  "spvo",
  "tqlg",
  "nvzr",
  "jeay",
  "jfjpa",
  "oydf",
  "rjmrzhzm",
  "ovdv",
  "nytua",
  "vmrw",
  "yesm",
  "migp",
  "tzfnphpi",
  "nuji",
  "ilsxa",
  "cakt",
  "qarba",
  "ylnx",
  "hdcq",
  "upqqa",
  "opoi",
  "nmbb",
  "nmtga",
  "cyaba",
  "bfex",
  "vlltyrzp",
  "xtcy",
  "mbwx",
  "gcfl",
  "oakba",
  "gfgr",
  "vzdb",
  "qzmm",
  "puyv",
  "tytb",
  "kemr",
  "ybxg",
  "mlrt",
  "fzbj",
  "fcoea",
  "nmjt",
  "yzrl",
  "pcpg",
  "sqzy",
  "zdmo",
  "retk",
  "vvuc",
  "cblbgubn",
  "zrub",
  "ecxy",
  "wsjv",
  "vsmy",
  "rbnp",
  "hkxxd",
  "ddrz",
  "lryp",
  "dvcl",
  "zbai",
  "nkoq",
  "lkck",
  "rxzc",
  "vnhna",
  "vptqa",
  "rqvba",
  "xlfw",
  "kbuy",
  "fmks",
  "nqwi",
  "nkqj",
  "omlp",
  "izfq",
  "wpbd",
  "fzpn",
  "yayo",
  "knuklhfe",
  "kmbm",
  "bafe",
  "ydex",
  "uluza",
  "wets",
  "hsbg",
  "ulnt",
  "cbnu",
  "jvufa",
  "qmed",
  "gjqoa",
  "hgzk",
  "zpur",
  "kzye",
  "odkh",
  "hgcrotlm",
  "miohmped",
  "qmak",
  "xiddxhyc",
  "ydwm",
  "vdgm",
  "rexfa",
  "lgfo",
  "bzaz",
  "rrzdywfb",
  "vrlg",
  "migphqfe",
  "nwyhaahk",
  "tjlzb",
  "uloza",
  "kctpa",
  "wajy",
  "vqmh",
  "lpomtsjq",
  "migba",
  "tzdnscri",
  "llkza",
  "kugk",
  "aorc",
  "wkxj",
  "zbbw",
  "wzec",
  "lkki",
  "bccs",
  "aacm",
  "jozhwmax",
  "tjsda",
  "jbrexexc",
  "trxnxuty",
  "akylzrrq",
  "yfhpa",
  "lrdlpgto",
  "xbcvmbqo",
  "noyfa",
  "msrh",
  "dvoy",
  "tesnjfew",
  "veixffjl",
  "rlqkwbld",
  "nlpowdcw",
  "gqxz",
  "rjxu",
  "snwh",
  "ayxm",
  "dglw",
  "tmxd",
  "jtdd",
  "mixi",
  "plxejekc",
  "nhgdxhrq",
  "vdjbpnle",
  "huxhcjdk",
  "rtjbwgfw",
  "xolosbmv",
  "wgtt",
  "tjpy",
  "gfhh",
  "gqhc",
  "rxul",
  "mhmi",
  "olgc",
  "auot",
  "uegk",
  "zqtr",
  "hkcwa",
  "vjpja",
  "rhdnafxx",
  "jkelqqog",
  "jfspb",
  "nwnpjmwz",
  "qppr",
  "egacbplh",
  "dddwa",
  "kjiu",
  "nivua",
  "kzpu",
  "tyss",
  "nvyf",
  "opbz",
  "uhxc",
  "sokc",
  "asim",
  "tbjp",
  "ulvyhraj",
  "ugtf",
  "mwby",
  "hcpn",
  "rlgqxugx",
  "sywo",
  "uxdhawqk",
  "dvhqa",
  "pale",
  "imlba",
  "qazkpoml",
  "klkjxbai",
  "tiqn",
  "acrfafqh",
  "rbhtrxux",
  "uutgncyo",
  "zuch",
  "ausub",
  "spurrtdk",
  "blohczct",
  "tjiq",
  "vkku",
  "pbqo",
  "hjvp",
  "fdvd",
  "wovq",
  "gjgbnarq",
  "jsnbazzf",
  "yqlq",
  "wnuya",
  "oeok",
  "heoq",
  "owkw",
  "ikrd",
  "cfejtomo",
  "qsxd",
  "lscy",
  "elnl",
  "fars",
  "sayz",
  "hxuw",
  "ijcv",
  "mkxggjzp",
  "evrn",
  "nntbxytr",
  "nlyca",
  "upoma",
  "qmrg",
  "lgwhcwtx",
  "qgeuidbm",
  "uqyz",
  "ftlzmdio",
  "xuki",
  "dcgk",
  "zsowdrcz",
  "ujjyyawz",
  "wnpcaiuu",
  "pzgnadlq",
  "liwclbjp",
  "bcpga",
  "znzjytox",
  "bjur",
  "rtkvcmdg",
  "avqdxbnz",
  "adur",
  "iezt",
  "khbv",
  "qtsva",
  "shhc",
  "nzah",
  "ubgj",
  "exktb",
  "oqtv",
  "arhmb",
  "rmctwmkp",
  "disx",
  "zvjjcwcx",
  "rllnkhhk",
  "eprl",
  "ebrra",
  "bvuk",
  "yypxpnkq",
  "dmrt",
  "vhrrsvct",
  "znuv",
  "yliy",
  "rnyq",
  "kbzf",
  "cxmxa",
  "ljji",
  "glmwlhpc",
  "ixqvowiv",
  "xnrs",
  "ahku",
  "xbwu",
  "gkvgakbf",
  "xzgxefsd",
  "fpje",
  "hhnja",
  "dmuva",
  "gwhr",
  "dfdm",
  "wloya",
  "bhlfnssn",
  "pqblnmeb",
  "ikoja",
  "dmlfayhd",
  "cbtiunhk",
  "lqbz",
  "qzwpjnft",
  "simh",
  "okje",
  "xrnj",
  "dvfx",
  "yjfizmfz",
  "mhwlrinq",
  "owfr",
  "rofxhudf",
  "sttlibll",
  "eekhquiw",
  "addj",
  "bnsja",
  "nhnowlvv",
  "uttuetqd",
  "wexbhtdg",
  "cfcohynf",
  "kcffa",
  "uqqdhlaw",
  "vkuo",
  "kcjj",
  "xpxxa",
  "apzl",
  "flvb",
  "hpjt",
  "lniwjbir",
  "elcl",
  "alvpa",
  "ygrg",
  "norib",
  "xycn",
  "bvhu",
  "buqt",
  "dgnh",
  "dbzoqkrj",
  "zybnulhl",
  "ulosfknb",
  "rsdyllmf",
  "qzdya",
  "bkbva",
  "nulqtuhe",
  "euwzaejl",
  "akhcsrwo",
  "xmmyqkzs",
  "nkyigtgk",
  "xfeizgjq",
  "mzmh",
  "ufed",
  "ieil",
  "flsx",
  "vifh",
  "lxpz",
  "ylfo",
  "utnj",
  "zqnh",
  "xidc",
  "rcbwqnyy",
  "bgvduxdk",
  "skwd",
  "qzoyomkr",
  "cyrhyykd",
  "fwtw",
  "fezu",
  "srju",
  "ujpq",
  "zakb",
  "rjrs",
  "gfhub",
  "iptp",
  "wgedqhlt",
  "ohhlblnu",
  "vlhe",
  "sbgm",
  "azkueztq",
  "xerl",
  "unuo",
  "gkydremh",
  "tnpq",
  "oayea",
  "rqqk",
  "agnn",
  "xvwjdicz",
  "jsfraiht",
  "byvwa",
  "tjpo",
  "kvlzwvoo",
  "wutwa",
  "svajdyug",
  "hlot",
  "viff",
  "okiv",
  "jasna",
  "ticlrezc",
  "nbmhgpsz",
  "tlozkiig",
  "cjgwa",
  "pnwf",
  "yxar",
  "gtmea",
  "nuvw",
  "xtcbb",
  "gjvjqxpp",
  "dhtd"
)



for (pubID <- pubIDs) {

  val dir = new File("TouchDevelopPreprocessing/testfiles/"+dirs)

  if (dir.isDirectory || dir.mkdir()) {
    val p = new PrintWriter(new File(dir+"/"+pubID+".td"))
    try {
      p.println(fetchFile(Scripts.codeURLfromPubID(pubID)))
    } finally { p.close() }
  } else { println("could not create dir") }

}


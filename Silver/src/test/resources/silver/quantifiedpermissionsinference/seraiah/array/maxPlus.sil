method max_array_plus(arr: Ref, lenA:Int) returns (x: Int)
{
  if (lenA <= 0) {
    x := -1
  } else {
    var y: Int
    x := 0;
    y := lenA - 1;
    while (x != y)
    {
      if (loc(arr, x).val <= loc(arr, y).val) {
        x := x + 1
      } else {
        y := y - 1
      }
    }
    loc(arr, 10).val := 0
  }
}

/* Encoding of arrays */

field val: Int

domain IArray {
  function loc(a: Ref, i: Int): Ref
  function len(a: Ref): Int
  function first(r: Ref): Ref
  function second(r: Ref): Int

  axiom all_diff {
    forall a: Ref, i: Int :: {loc(a, i)}
      first(loc(a, i)) == a && second(loc(a, i)) == i
  }

  axiom length_nonneg {
    forall a: Ref :: len(a) >= 0
  }
}